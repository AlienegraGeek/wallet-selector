(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5556:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Hp}});var r=n(2784),o=n(406),a=n(8526),i=n.n(a),c=n(7984),s=n(9369),u=n(6412),l=n(3089),d=n(5235),f=n(2754),p=function(){function e(t){(0,u.Z)(this,e),(0,d.Z)(this,"provider",void 0),this.provider=new f.providers.JsonRpcProvider({url:t})}return(0,l.Z)(e,[{key:"query",value:function(e){return this.provider.query(e)}},{key:"viewAccessKey",value:function(e){var t=e.accountId,n=e.publicKey;return this.query({request_type:"view_access_key",finality:"final",account_id:t,public_key:n})}},{key:"block",value:function(e){return this.provider.block(e)}},{key:"sendTransaction",value:function(e){return this.provider.sendTransaction(e)}}]),e}(),v=(n(5975),n(7389),function(){function e(t,n){(0,u.Z)(this,e),(0,d.Z)(this,"storage",void 0),(0,d.Z)(this,"namespace",void 0),this.storage=t,this.namespace=Array.isArray(n)?n.join(":"):n}return(0,l.Z)(e,[{key:"resolveKey",value:function(e){return[this.namespace,e].join(":")}},{key:"getItem",value:function(e){return this.storage.getItem(this.resolveKey(e)).then((function(e){return"string"===typeof e?JSON.parse(e):null}))}},{key:"setItem",value:function(e,t){return this.storage.setItem(this.resolveKey(e),JSON.stringify(t))}},{key:"removeItem",value:function(e){return this.storage.removeItem(this.resolveKey(e))}}]),e}()),h=function(){function e(){(0,u.Z)(this,e)}return(0,l.Z)(e,[{key:"getItem",value:function(e){return new Promise((function(t){t(localStorage.getItem(e))}))}},{key:"setItem",value:function(e,t){return new Promise((function(n){localStorage.setItem(e,t),n()}))}},{key:"removeItem",value:function(e){return new Promise((function(t){localStorage.removeItem(e),t()}))}}]),e}(),g=function(){function e(t){(0,u.Z)(this,e),(0,d.Z)(this,"namespace",void 0),this.namespace=t}return(0,l.Z)(e,[{key:"emit",value:function(t){var n;if(e.debug){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];var i;if(this.namespace&&"error"!==t)(i=console)[t].apply(i,[this.namespace].concat(o));else(n=console)[t].apply(n,o)}}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["log"].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["info"].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["warn"].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.emit.apply(this,["error"].concat(t))}}]),e}();(0,d.Z)(g,"debug",!1);var m=new g,w=(n(2958),n(2699)),b=function(){function e(){(0,u.Z)(this,e),(0,d.Z)(this,"emitter",new w.EventEmitter)}return(0,l.Z)(e,[{key:"on",value:function(e,t){var n=this;return this.emitter.on(e,t),{remove:function(){return n.emitter.off(e,t)}}}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}(),y="near-wallet-selector",x="contract",k="contract:pending",j="selectedWalletId",I="selectedWalletId:pending";function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(){function e(t){var n=t.factories,r=t.storage,o=t.options,a=t.store,i=t.emitter,c=t.provider;(0,u.Z)(this,e),(0,d.Z)(this,"factories",void 0),(0,d.Z)(this,"storage",void 0),(0,d.Z)(this,"options",void 0),(0,d.Z)(this,"store",void 0),(0,d.Z)(this,"emitter",void 0),(0,d.Z)(this,"provider",void 0),(0,d.Z)(this,"modules",void 0),(0,d.Z)(this,"instances",void 0),this.factories=n,this.storage=r,this.options=o,this.store=a,this.emitter=i,this.provider=c,this.modules=[],this.instances={}}return(0,l.Z)(e,[{key:"validateWallet",value:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.getWallet(t);case 3:if(!(r=e.sent)){e.next=8;break}return e.next=7,r.getAccounts().catch((function(e){return m.log("Failed to validate ".concat(r.id," during setup")),m.error(e),[]}));case 7:n=e.sent;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"resolveStorageState",value:function(){var e=(0,o.Z)(i().mark((function e(){var t,n,r,o,a,c,s,u,l,d,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new v(this.storage,y),e.next=3,t.getItem(I);case 3:return n=e.sent,e.next=6,t.getItem(k);case 6:if(r=e.sent,!n||!r){e.next=24;break}return e.next=10,this.validateWallet(n);case 10:return o=e.sent,e.next=13,t.removeItem(I);case 13:return e.next=15,t.removeItem(k);case 15:if(!o.length){e.next=24;break}return a=this.store.getState(),c=a.selectedWalletId,e.next=19,this.getWallet(c);case 19:if(!(s=e.sent)||n===c){e.next=23;break}return e.next=23,s.signOut().catch((function(e){m.log("Failed to sign out existing wallet"),m.error(e)}));case 23:return e.abrupt("return",{accounts:o,contract:r,selectedWalletId:n});case 24:return u=this.store.getState(),l=u.contract,d=u.selectedWalletId,e.next=27,this.validateWallet(d);case 27:if((f=e.sent).length){e.next=30;break}return e.abrupt("return",{accounts:[],contract:null,selectedWalletId:null});case 30:return e.abrupt("return",{accounts:f,contract:l,selectedWalletId:d});case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signOutWallet",value:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getWallet(t);case 2:return n=e.sent,e.next=5,n.signOut().catch((function(e){m.log("Failed to sign out ".concat(n.id)),m.error(e),r.onWalletSignedOut(n.id)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onWalletSignedIn",value:function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o,a,c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.accounts,o=n.contractId,a=n.methodNames,c=this.store.getState(),s=c.selectedWalletId,u=new v(this.storage,y),l={contractId:o,methodNames:a},r.length){e.next=12;break}if("browser"!==this.getModule(t).type){e.next=11;break}return e.next=9,u.setItem(I,t);case 9:return e.next=11,u.setItem(k,l);case 11:return e.abrupt("return");case 12:if(!s||s===t){e.next=15;break}return e.next=15,this.signOutWallet(s);case 15:this.store.dispatch({type:"WALLET_CONNECTED",payload:{walletId:t,contract:l,accounts:r}});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onWalletSignedOut",value:function(e){this.store.dispatch({type:"WALLET_DISCONNECTED",payload:{walletId:e}})}},{key:"setupWalletEmitter",value:function(e){var t=this,n=new b;return n.on("signedOut",(function(){t.onWalletSignedOut(e.id)})),n.on("signedIn",(function(n){t.onWalletSignedIn(e.id,n)})),n.on("accountsChanged",function(){var n=(0,o.Z)(i().mark((function n(r){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((o=r.accounts).length){n.next=3;break}return n.abrupt("return",t.signOutWallet(e.id));case 3:t.store.dispatch({type:"ACCOUNTS_CHANGED",payload:{walletId:e.id,accounts:o}});case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),n.on("networkChanged",(function(n){var r=n.networkId;t.emitter.emit("networkChanged",{walletId:e.id,networkId:r})})),n}},{key:"decorateWallet",value:function(e){var t=this,n=e.signIn,r=e.signOut;return e.signIn=function(){var r=(0,o.Z)(i().mark((function r(o){var a,c,s,u,l;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n(o);case 2:return a=r.sent,s=(c=o).contractId,u=c.methodNames,l=void 0===u?[]:u,r.next=6,t.onWalletSignedIn(e.id,{accounts:a,contractId:s,methodNames:l});case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),e.signOut=(0,o.Z)(i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r();case 2:t.onWalletSignedOut(e.id);case 3:case"end":return n.stop()}}),n)}))),e}},{key:"setupInstance",value:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.metadata.available){e.next=3;break}throw n="injected"===t.type?"not installed":"not available",Error("".concat(t.metadata.name," is ").concat(n));case 3:return e.t0=S,e.t1={id:t.id,type:t.type,metadata:t.metadata},e.next=7,t.init({id:t.id,type:t.type,metadata:t.metadata,options:this.options,store:this.store.toReadOnly(),provider:this.provider,emitter:this.setupWalletEmitter(t),logger:new g(t.id),storage:new v(this.storage,[y,t.id])});case 7:return e.t2=e.sent,r=(0,e.t0)(e.t1,e.t2),e.abrupt("return",this.decorateWallet(r));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getModule",value:function(e){return this.modules.find((function(t){return t.id===e}))}},{key:"getWallet",value:function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getModule(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.next=5,n.wallet();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setup",value:function(){var e=(0,o.Z)(i().mark((function e(){var t,n,r,a,c,s,u,l=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=i().mark((function e(n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.factories[n]({options:l.options}).catch((function(e){return m.log("Failed to setup module"),m.error(e),null}));case 2:if(r=e.sent){e.next=5;break}return e.abrupt("return","continue");case 5:if(!t.some((function(e){return e.id===r.id}))){e.next=7;break}throw new Error("Duplicate module id detected: "+r.id);case 7:t.push({id:r.id,type:r.type,metadata:r.metadata,wallet:function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=l.instances[r.id])){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,l.setupInstance(r);case 5:return t=e.sent,l.instances[r.id]=t,e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()});case 8:case"end":return e.stop()}}),e)})),r=0;case 3:if(!(r<this.factories.length)){e.next=11;break}return e.delegateYield(n(r),"t0",5);case 5:if("continue"!==e.t0){e.next=8;break}return e.abrupt("continue",8);case 8:r+=1,e.next=3;break;case 11:return this.modules=t,e.next=14,this.resolveStorageState();case 14:a=e.sent,c=a.accounts,s=a.contract,u=a.selectedWalletId,this.store.dispatch({type:"SETUP_WALLET_MODULES",payload:{modules:t,accounts:c,contract:s,selectedWalletId:u}});case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),P=function(e){return"string"===typeof e?function(e){switch(e){case"mainnet":return{networkId:e,nodeUrl:"https://rpc.mainnet.near.org",helperUrl:"https://helper.mainnet.near.org",explorerUrl:"https://explorer.near.org",indexerUrl:"https://api.kitwallet.app"};case"testnet":return{networkId:e,nodeUrl:"https://rpc.testnet.near.org",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://explorer.testnet.near.org",indexerUrl:"https://testnet-api.kitwallet.app"};default:throw Error("Failed to find config for: '".concat(e,"'"))}}(e):e},A=function(e){return{options:{network:P(e.network),debug:e.debug||!1},storage:e.storage||new h}},Z=n(6130),T=n(8533),N=n(1869);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){switch(m.log("Store Action",t),t.type){case"SETUP_WALLET_MODULES":var n=t.payload,r=n.modules,o=n.accounts,a=n.contract,i=n.selectedWalletId,c=o.map((function(e,t){return W(W({},e),{},{active:0===t})}));return W(W({},e),{},{modules:r,accounts:c,contract:a,selectedWalletId:i});case"WALLET_CONNECTED":var s=t.payload,u=s.walletId,l=s.contract,d=s.accounts;if(!d.length)return e;var f=e.accounts.findIndex((function(e){return e.active})),p=d.map((function(e,t){return W(W({},e),{},{active:t===(f>-1?f:0)})}));return W(W({},e),{},{contract:l,accounts:p,selectedWalletId:u});case"WALLET_DISCONNECTED":return t.payload.walletId!==e.selectedWalletId?e:W(W({},e),{},{contract:null,accounts:[],selectedWalletId:null});case"ACCOUNTS_CHANGED":var v=t.payload,h=v.walletId,g=v.accounts;if(h!==e.selectedWalletId)return e;var w=e.accounts.find((function(e){return e.active})),b=!g.some((function(e){return e.accountId===(null===w||void 0===w?void 0:w.accountId)})),y=g.map((function(e,t){return W(W({},e),{},{active:b?0===t:e.accountId===(null===w||void 0===w?void 0:w.accountId)})}));return W(W({},e),{},{accounts:y});case"SET_ACTIVE_ACCOUNT":var x=t.payload.accountId,k=e.accounts.map((function(e){return W(W({},e),{},{active:e.accountId===x})}));return W(W({},e),{},{accounts:k});default:return e}},K=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new v(t,y),e.t0=[],e.t1=[],e.next=5,n.getItem(x);case 5:return e.t2=e.sent,e.next=8,n.getItem(j);case 8:return e.t3=e.sent,r={modules:e.t0,accounts:e.t1,contract:e.t2,selectedWalletId:e.t3},a=new Z.X(r),(c=new T.x).pipe((0,N.R)(_,r)).subscribe(a),s=function(){var e=(0,o.Z)(i().mark((function e(t,r,o,a){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r[a]!==t[a]){e.next=2;break}return e.abrupt("return");case 2:if(!r[a]){e.next=6;break}return e.next=5,n.setItem(o,r[a]);case 5:return e.abrupt("return");case 6:return e.next=8,n.removeItem(o);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}(),u=a.getValue(),a.subscribe((function(e){s(u,e,j,"selectedWalletId"),s(u,e,x,"contract"),u=e})),e.abrupt("return",{observable:a,getState:function(){return a.getValue()},dispatch:function(e){return c.next(e)},toReadOnly:function(){return{getState:function(){return a.getValue()},observable:a.asObservable()}}});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=null,D=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=A(t),r=n.options,a=n.storage,g.debug=r.debug,c=new b,e.next=5,K(a);case 5:return s=e.sent,u=new E({factories:t.modules,storage:a,options:r,store:s,emitter:c,provider:new p(r.network.nodeUrl)}),e.next=9,u.setup();case 9:return U||(U={options:r,store:s.toReadOnly(),wallet:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.getState(),r=n.selectedWalletId,e.next=3,u.getWallet(t||r);case 3:if(o=e.sent){e.next=8;break}if(!t){e.next=7;break}throw new Error("Invalid wallet id");case 7:throw new Error("No wallet selected");case 8:return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setActiveAccount:function(e){if(!s.getState().accounts.some((function(t){return t.accountId===e})))throw new Error("Invalid account id");s.dispatch({type:"SET_ACTIVE_ACCOUNT",payload:{accountId:e}})},isSignedIn:function(){var e=s.getState().accounts;return Boolean(e.length)},on:function(e,t){return c.on(e,t)},off:function(e,t){c.off(e,t)}}),e.abrupt("return",U);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e){return new Promise((function(t){return setTimeout(t,e)}))},M=function(){var e=(0,o.Z)(i().mark((function e(t,n,r){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=t())){e.next=3;break}return e.abrupt("return",o);case 3:if(r){e.next=5;break}throw new Error("Exceeded timeout");case 5:return e.abrupt("return",F(n).then((function(){return M(t,n,r-1)})));case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o,a,c,s=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=n.timeout,o=void 0===r?200:r,a=n.interval,c=void 0===a?50:a,e.abrupt("return",Promise.race([F(o).then((function(){throw new Error("Exceeded timeout")})),M(t,c,Math.floor(o/c))]));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return e.accounts.find((function(e){return e.active}))||null},B=n(2322),q=n(8316),G="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},V=function(e){return e&&e.Math==Math&&e},$=V("object"==typeof globalThis&&globalThis)||V("object"==typeof window&&window)||V("object"==typeof self&&self)||V("object"==typeof G&&G)||function(){return this}()||Function("return this")(),z=function(e){try{return!!e()}catch(t){return!0}},H=!z((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})),J=H,X=Function.prototype,Y=X.bind,Q=X.call,ee=J&&Y.bind(Q,Q),te=J?function(e){return e&&ee(e)}:function(e){return e&&function(){return Q.apply(e,arguments)}},ne=te,re=ne({}.toString),oe=ne("".slice),ae=function(e){return oe(re(e),8,-1)},ie=te,ce=z,se=ae,ue=$.Object,le=ie("".split),de=ce((function(){return!ue("z").propertyIsEnumerable(0)}))?function(e){return"String"==se(e)?le(e,""):ue(e)}:ue,fe=$.TypeError,pe=function(e){if(void 0==e)throw fe("Can't call method on "+e);return e},ve=de,he=pe,ge=function(e){return ve(he(e))},me={exports:{}},we=$,be=Object.defineProperty,ye=function(e,t){try{be(we,e,{value:t,configurable:!0,writable:!0})}catch(n){we[e]=t}return t},xe=ye,ke="__core-js_shared__",je=$[ke]||xe(ke,{}),Ie=je;(me.exports=function(e,t){return Ie[e]||(Ie[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.21.1",mode:"global",copyright:"\xa9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.21.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Oe,Se,Ee=pe,Pe=$.Object,Ae=function(e){return Pe(Ee(e))},Ze=Ae,Te=te({}.hasOwnProperty),Ne=Object.hasOwn||function(e,t){return Te(Ze(e),t)},Ce=te,We=0,_e=Math.random(),Ke=Ce(1..toString),Ue=function(e){return"Symbol("+(void 0===e?"":e)+")_"+Ke(++We+_e,36)},De=function(e){return"function"==typeof e},Fe=$,Me=De,Le=function(e){return Me(e)?e:void 0},Re=function(e,t){return arguments.length<2?Le(Fe[e]):Fe[e]&&Fe[e][t]},Be=Re("navigator","userAgent")||"",qe=$,Ge=Be,Ve=qe.process,$e=qe.Deno,ze=Ve&&Ve.versions||$e&&$e.version,He=ze&&ze.v8;He&&(Se=(Oe=He.split("."))[0]>0&&Oe[0]<4?1:+(Oe[0]+Oe[1])),!Se&&Ge&&(!(Oe=Ge.match(/Edge\/(\d+)/))||Oe[1]>=74)&&(Oe=Ge.match(/Chrome\/(\d+)/))&&(Se=+Oe[1]);var Je=Se,Xe=Je,Ye=z,Qe=!!Object.getOwnPropertySymbols&&!Ye((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Xe&&Xe<41})),et=Qe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,tt=$,nt=me.exports,rt=Ne,ot=Ue,at=Qe,it=et,ct=nt("wks"),st=tt.Symbol,ut=st&&st.for,lt=it?st:st&&st.withoutSetter||ot,dt=function(e){if(!rt(ct,e)||!at&&"string"!=typeof ct[e]){var t="Symbol."+e;at&&rt(st,e)?ct[e]=st[e]:ct[e]=it&&ut?ut(t):lt(t)}return ct[e]},ft=De,pt=function(e){return"object"==typeof e?null!==e:ft(e)},vt=$,ht=pt,gt=vt.String,mt=vt.TypeError,wt=function(e){if(ht(e))return e;throw mt(gt(e)+" is not an object")},bt={},yt=!z((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),xt=yt&&z((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),kt={},jt=pt,It=$.document,Ot=jt(It)&&jt(It.createElement),St=function(e){return Ot?It.createElement(e):{}},Et=St,Pt=!yt&&!z((function(){return 7!=Object.defineProperty(Et("div"),"a",{get:function(){return 7}}).a})),At=H,Zt=Function.prototype.call,Tt=At?Zt.bind(Zt):function(){return Zt.apply(Zt,arguments)},Nt=te({}.isPrototypeOf),Ct=Re,Wt=De,_t=Nt,Kt=et,Ut=$.Object,Dt=Kt?function(e){return"symbol"==typeof e}:function(e){var t=Ct("Symbol");return Wt(t)&&_t(t.prototype,Ut(e))},Ft=$.String,Mt=function(e){try{return Ft(e)}catch(t){return"Object"}},Lt=De,Rt=Mt,Bt=$.TypeError,qt=function(e){if(Lt(e))return e;throw Bt(Rt(e)+" is not a function")},Gt=qt,Vt=function(e,t){var n=e[t];return null==n?void 0:Gt(n)},$t=Tt,zt=De,Ht=pt,Jt=$.TypeError,Xt=Tt,Yt=pt,Qt=Dt,en=Vt,tn=function(e,t){var n,r;if("string"===t&&zt(n=e.toString)&&!Ht(r=$t(n,e)))return r;if(zt(n=e.valueOf)&&!Ht(r=$t(n,e)))return r;if("string"!==t&&zt(n=e.toString)&&!Ht(r=$t(n,e)))return r;throw Jt("Can't convert object to primitive value")},nn=dt,rn=$.TypeError,on=nn("toPrimitive"),an=function(e,t){if(!Yt(e)||Qt(e))return e;var n,r=en(e,on);if(r){if(void 0===t&&(t="default"),n=Xt(r,e,t),!Yt(n)||Qt(n))return n;throw rn("Can't convert object to primitive value")}return void 0===t&&(t="number"),tn(e,t)},cn=Dt,sn=function(e){var t=an(e,"string");return cn(t)?t:t+""},un=yt,ln=Pt,dn=xt,fn=wt,pn=sn,vn=$.TypeError,hn=Object.defineProperty,gn=Object.getOwnPropertyDescriptor,mn="enumerable",wn="configurable",bn="writable";kt.f=un?dn?function(e,t,n){if(fn(e),t=pn(t),fn(n),"function"===typeof e&&"prototype"===t&&"value"in n&&bn in n&&!n.writable){var r=gn(e,t);r&&r.writable&&(e[t]=n.value,n={configurable:wn in n?n.configurable:r.configurable,enumerable:mn in n?n.enumerable:r.enumerable,writable:!1})}return hn(e,t,n)}:hn:function(e,t,n){if(fn(e),t=pn(t),fn(n),ln)try{return hn(e,t,n)}catch(r){}if("get"in n||"set"in n)throw vn("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var yn=Math.ceil,xn=Math.floor,kn=function(e){var t=+e;return t!==t||0===t?0:(t>0?xn:yn)(t)},jn=kn,In=Math.max,On=Math.min,Sn=function(e,t){var n=jn(e);return n<0?In(n+t,0):On(n,t)},En=kn,Pn=Math.min,An=function(e){return e>0?Pn(En(e),9007199254740991):0},Zn=function(e){return An(e.length)},Tn=ge,Nn=Sn,Cn=Zn,Wn=function(e){return function(t,n,r){var o,a=Tn(t),i=Cn(a),c=Nn(r,i);if(e&&n!=n){for(;i>c;)if((o=a[c++])!=o)return!0}else for(;i>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}},_n={includes:Wn(!0),indexOf:Wn(!1)},Kn={},Un=Ne,Dn=ge,Fn=_n.indexOf,Mn=Kn,Ln=te([].push),Rn=function(e,t){var n,r=Dn(e),o=0,a=[];for(n in r)!Un(Mn,n)&&Un(r,n)&&Ln(a,n);for(;t.length>o;)Un(r,n=t[o++])&&(~Fn(a,n)||Ln(a,n));return a},Bn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qn=Rn,Gn=Bn,Vn=Object.keys||function(e){return qn(e,Gn)},$n=yt,zn=xt,Hn=kt,Jn=wt,Xn=ge,Yn=Vn;bt.f=$n&&!zn?Object.defineProperties:function(e,t){Jn(e);for(var n,r=Xn(t),o=Yn(t),a=o.length,i=0;a>i;)Hn.f(e,n=o[i++],r[n]);return e};var Qn,er=Re("document","documentElement"),tr=me.exports,nr=Ue,rr=tr("keys"),or=function(e){return rr[e]||(rr[e]=nr(e))},ar=wt,ir=bt,cr=Bn,sr=Kn,ur=er,lr=St,dr=or("IE_PROTO"),fr=function(){},pr=function(e){return"<script>"+e+"</"+"script>"},vr=function(e){e.write(pr("")),e.close();var t=e.parentWindow.Object;return e=null,t},hr=function(){try{Qn=new ActiveXObject("htmlfile")}catch(t){}hr="undefined"!=typeof document?document.domain&&Qn?vr(Qn):function(){var e,t=lr("iframe");return t.style.display="none",ur.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(pr("document.F=Object")),e.close(),e.F}():vr(Qn);for(var e=cr.length;e--;)delete hr.prototype[cr[e]];return hr()};sr[dr]=!0;var gr=Object.create||function(e,t){var n;return null!==e?(fr.prototype=ar(e),n=new fr,fr.prototype=null,n[dr]=e):n=hr(),void 0===t?n:ir.f(n,t)},mr=gr,wr=kt,br=dt("unscopables"),yr=Array.prototype;void 0==yr[br]&&wr.f(yr,br,{configurable:!0,value:mr(null)});var xr={},kr=De,jr=je,Ir=te(Function.toString);kr(jr.inspectSource)||(jr.inspectSource=function(e){return Ir(e)});var Or,Sr,Er,Pr=jr.inspectSource,Ar=De,Zr=Pr,Tr=$.WeakMap,Nr=Ar(Tr)&&/native code/.test(Zr(Tr)),Cr=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Wr=kt,_r=Cr,Kr=yt?function(e,t,n){return Wr.f(e,t,_r(1,n))}:function(e,t,n){return e[t]=n,e},Ur=Nr,Dr=$,Fr=te,Mr=pt,Lr=Kr,Rr=Ne,Br=je,qr=or,Gr=Kn,Vr="Object already initialized",$r=Dr.TypeError,zr=Dr.WeakMap;if(Ur||Br.state){var Hr=Br.state||(Br.state=new zr),Jr=Fr(Hr.get),Xr=Fr(Hr.has),Yr=Fr(Hr.set);Or=function(e,t){if(Xr(Hr,e))throw new $r(Vr);return t.facade=e,Yr(Hr,e,t),t},Sr=function(e){return Jr(Hr,e)||{}},Er=function(e){return Xr(Hr,e)}}else{var Qr=qr("state");Gr[Qr]=!0,Or=function(e,t){if(Rr(e,Qr))throw new $r(Vr);return t.facade=e,Lr(e,Qr,t),t},Sr=function(e){return Rr(e,Qr)?e[Qr]:{}},Er=function(e){return Rr(e,Qr)}}var eo={set:Or,get:Sr,has:Er,enforce:function(e){return Er(e)?Sr(e):Or(e,{})},getterFor:function(e){return function(t){var n;if(!Mr(t)||(n=Sr(t)).type!==e)throw $r("Incompatible receiver, "+e+" required");return n}}},to={},no={},ro={}.propertyIsEnumerable,oo=Object.getOwnPropertyDescriptor,ao=oo&&!ro.call({1:2},1);no.f=ao?function(e){var t=oo(this,e);return!!t&&t.enumerable}:ro;var io=yt,co=Tt,so=no,uo=Cr,lo=ge,fo=sn,po=Ne,vo=Pt,ho=Object.getOwnPropertyDescriptor;to.f=io?ho:function(e,t){if(e=lo(e),t=fo(t),vo)try{return ho(e,t)}catch(n){}if(po(e,t))return uo(!co(so.f,e,t),e[t])};var go={exports:{}},mo=yt,wo=Ne,bo=Function.prototype,yo=mo&&Object.getOwnPropertyDescriptor,xo=wo(bo,"name"),ko={EXISTS:xo,PROPER:xo&&"something"===function(){}.name,CONFIGURABLE:xo&&(!mo||mo&&yo(bo,"name").configurable)},jo=$,Io=De,Oo=Ne,So=Kr,Eo=ye,Po=Pr,Ao=ko.CONFIGURABLE,Zo=eo.get,To=eo.enforce,No=String(String).split("String");(go.exports=function(e,t,n,r){var o,a=!!r&&!!r.unsafe,i=!!r&&!!r.enumerable,c=!!r&&!!r.noTargetGet,s=r&&void 0!==r.name?r.name:t;Io(n)&&("Symbol("===String(s).slice(0,7)&&(s="["+String(s).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Oo(n,"name")||Ao&&n.name!==s)&&So(n,"name",s),(o=To(n)).source||(o.source=No.join("string"==typeof s?s:""))),e!==jo?(a?!c&&e[t]&&(i=!0):delete e[t],i?e[t]=n:So(e,t,n)):i?e[t]=n:Eo(t,n)})(Function.prototype,"toString",(function(){return Io(this)&&Zo(this).source||Po(this)}));var Co={},Wo=Rn,_o=Bn.concat("length","prototype");Co.f=Object.getOwnPropertyNames||function(e){return Wo(e,_o)};var Ko={};Ko.f=Object.getOwnPropertySymbols;var Uo,Do,Fo,Mo=Re,Lo=Co,Ro=Ko,Bo=wt,qo=te([].concat),Go=Mo("Reflect","ownKeys")||function(e){var t=Lo.f(Bo(e)),n=Ro.f;return n?qo(t,n(e)):t},Vo=Ne,$o=Go,zo=to,Ho=kt,Jo=function(e,t,n){for(var r=$o(t),o=Ho.f,a=zo.f,i=0;i<r.length;i++){var c=r[i];Vo(e,c)||n&&Vo(n,c)||o(e,c,a(t,c))}},Xo=z,Yo=De,Qo=/#|\.prototype\./,ea=function(e,t){var n=na[ta(e)];return n==oa||n!=ra&&(Yo(t)?Xo(t):!!t)},ta=ea.normalize=function(e){return String(e).replace(Qo,".").toLowerCase()},na=ea.data={},ra=ea.NATIVE="N",oa=ea.POLYFILL="P",aa=ea,ia=$,ca=to.f,sa=Kr,ua=go.exports,la=ye,da=Jo,fa=aa,pa=function(e,t){var n,r,o,a,i,c=e.target,s=e.global,u=e.stat;if(n=s?ia:u?ia[c]||la(c,{}):(ia[c]||{}).prototype)for(r in t){if(a=t[r],o=e.noTargetGet?(i=ca(n,r))&&i.value:n[r],!fa(s?r:c+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;da(a,o)}(e.sham||o&&o.sham)&&sa(a,"sham",!0),ua(n,r,a,e)}},va=!z((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),ha=$,ga=Ne,ma=De,wa=Ae,ba=va,ya=or("IE_PROTO"),xa=ha.Object,ka=xa.prototype,ja=ba?xa.getPrototypeOf:function(e){var t=wa(e);if(ga(t,ya))return t[ya];var n=t.constructor;return ma(n)&&t instanceof n?n.prototype:t instanceof xa?ka:null},Ia=z,Oa=De,Sa=ja,Ea=go.exports,Pa=dt("iterator"),Aa=!1;[].keys&&("next"in(Fo=[].keys())?(Do=Sa(Sa(Fo)))!==Object.prototype&&(Uo=Do):Aa=!0);var Za=void 0==Uo||Ia((function(){var e={};return Uo[Pa].call(e)!==e}));Za&&(Uo={}),Oa(Uo[Pa])||Ea(Uo,Pa,(function(){return this}));var Ta={IteratorPrototype:Uo,BUGGY_SAFARI_ITERATORS:Aa},Na=kt.f,Ca=Ne,Wa=dt("toStringTag"),_a=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Ca(e,Wa)&&Na(e,Wa,{configurable:!0,value:t})},Ka=Ta.IteratorPrototype,Ua=gr,Da=Cr,Fa=_a,Ma=xr,La=function(){return this},Ra=$,Ba=De,qa=Ra.String,Ga=Ra.TypeError,Va=te,$a=wt,za=function(e){if("object"==typeof e||Ba(e))return e;throw Ga("Can't set "+qa(e)+" as a prototype")},Ha=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Va(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return $a(n),za(r),t?e(n,r):n.__proto__=r,n}}():void 0),Ja=pa,Xa=Tt,Ya=ko,Qa=De,ei=function(e,t,n,r){var o=t+" Iterator";return e.prototype=Ua(Ka,{next:Da(+!r,n)}),Fa(e,o,!1),Ma[o]=La,e},ti=ja,ni=Ha,ri=_a,oi=Kr,ai=go.exports,ii=xr,ci=Ya.PROPER,si=Ya.CONFIGURABLE,ui=Ta.IteratorPrototype,li=Ta.BUGGY_SAFARI_ITERATORS,di=dt("iterator"),fi="keys",pi="values",vi="entries",hi=function(){return this},gi=ge,mi=function(e){yr[br][e]=!0},wi=xr,bi=eo,yi=kt.f,xi=function(e,t,n,r,o,a,i){ei(n,t,r);var c,s,u,l=function(e){if(e===o&&h)return h;if(!li&&e in p)return p[e];switch(e){case fi:case pi:case vi:return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",f=!1,p=e.prototype,v=p[di]||p["@@iterator"]||o&&p[o],h=!li&&v||l(o),g="Array"==t&&p.entries||v;if(g&&(c=ti(g.call(new e)))!==Object.prototype&&c.next&&(ti(c)!==ui&&(ni?ni(c,ui):Qa(c[di])||ai(c,di,hi)),ri(c,d,!0)),ci&&o==pi&&v&&v.name!==pi&&(si?oi(p,"name",pi):(f=!0,h=function(){return Xa(v,this)})),o)if(s={values:l(pi),keys:a?h:l(fi),entries:l(vi)},i)for(u in s)(li||f||!(u in p))&&ai(p,u,s[u]);else Ja({target:t,proto:!0,forced:li||f},s);return p[di]!==h&&ai(p,di,h,{name:o}),ii[t]=h,s},ki=yt,ji="Array Iterator",Ii=bi.set,Oi=bi.getterFor(ji),Si=xi(Array,"Array",(function(e,t){Ii(this,{type:ji,target:gi(e),index:0,kind:t})}),(function(){var e=Oi(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values"),Ei=wi.Arguments=wi.Array;if(mi("keys"),mi("values"),mi("entries"),ki&&"values"!==Ei.name)try{yi(Ei,"name",{value:"values"})}catch(Jp){}var Pi=St("span").classList,Ai=Pi&&Pi.constructor&&Pi.constructor.prototype,Zi=Ai===Object.prototype?void 0:Ai,Ti=$,Ni={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ci=Zi,Wi=Si,_i=Kr,Ki=dt,Ui=Ki("iterator"),Di=Ki("toStringTag"),Fi=Wi.values,Mi=function(e,t){if(e){if(e[Ui]!==Fi)try{_i(e,Ui,Fi)}catch(Jp){e[Ui]=Fi}if(e[Di]||_i(e,Di,t),Ni[t])for(var n in Wi)if(e[n]!==Wi[n])try{_i(e,n,Wi[n])}catch(Jp){e[n]=Wi[n]}}};for(var Li in Ni)Mi(Ti[Li]&&Ti[Li].prototype,Li);Mi(Ci,"DOMTokenList");var Ri=yt,Bi=te,qi=Tt,Gi=z,Vi=Vn,$i=Ko,zi=no,Hi=Ae,Ji=de,Xi=Object.assign,Yi=Object.defineProperty,Qi=Bi([].concat),ec=!Xi||Gi((function(){if(Ri&&1!==Xi({b:1},Xi(Yi({},"a",{enumerable:!0,get:function(){Yi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=Xi({},e)[n]||Vi(Xi({},t)).join("")!=r}))?function(e,t){for(var n=Hi(e),r=arguments.length,o=1,a=$i.f,i=zi.f;r>o;)for(var c,s=Ji(arguments[o++]),u=a?Qi(Vi(s),a(s)):Vi(s),l=u.length,d=0;l>d;)c=u[d++],Ri&&!qi(i,s,c)||(n[c]=s[c]);return n}:Xi,tc=ec;pa({target:"Object",stat:!0,forced:Object.assign!==tc},{assign:tc});const nc=({selector:e,onSwitchWallet:t,onDismiss:n})=>(0,B.jsxs)("div",Object.assign({className:"switch-network-message-wrapper"},{children:[(0,B.jsx)("div",Object.assign({className:"header"},{children:(0,B.jsx)("h2",{children:"You Must Change Networks"},void 0)}),void 0),(0,B.jsxs)("div",Object.assign({className:"content"},{children:[(0,B.jsxs)("p",{children:["We've detected that you need to change your wallet's network to",(0,B.jsx)("strong",{children:` ${e.options.network.networkId}`},void 0)," for this dApp."]},void 0),(0,B.jsx)("p",{children:"Some wallets may not support changing networks. If you can not change networks you may consider switching to another wallet."},void 0)]}),void 0),(0,B.jsxs)("div",Object.assign({className:"action-buttons"},{children:[(0,B.jsx)("button",Object.assign({className:"left-button",onClick:n},{children:"Dismiss"}),void 0),(0,B.jsx)("button",Object.assign({className:"right-button",onClick:t},{children:"Switch Wallet"}),void 0)]}),void 0)]}),void 0);var rc={};rc[dt("toStringTag")]="z";var oc=$,ac="[object z]"===String(rc),ic=De,cc=ae,sc=dt("toStringTag"),uc=oc.Object,lc="Arguments"==cc(function(){return arguments}()),dc=ac?cc:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(Jp){}}(t=uc(e),sc))?n:lc?cc(t):"Object"==(r=cc(t))&&ic(t.callee)?"Arguments":r},fc=dc,pc=$.String,vc=function(e){if("Symbol"===fc(e))throw TypeError("Cannot convert a Symbol value to a string");return pc(e)},hc=sn,gc=kt,mc=Cr,wc=Sn,bc=Zn,yc=function(e,t,n){var r=hc(t);r in e?gc.f(e,r,mc(0,n)):e[r]=n},xc=$.Array,kc=Math.max,jc=function(e,t,n){for(var r=bc(e),o=wc(t,r),a=wc(void 0===n?r:n,r),i=xc(kc(a-o,0)),c=0;o<a;o++,c++)yc(i,c,e[o]);return i.length=c,i},Ic=Math.floor,Oc=function(e,t){var n=e.length,r=Ic(n/2);return n<8?Sc(e,t):Ec(e,Oc(jc(e,0,r),t),Oc(jc(e,r),t),t)},Sc=function(e,t){for(var n,r,o=e.length,a=1;a<o;){for(r=a,n=e[a];r&&t(e[r-1],n)>0;)e[r]=e[--r];r!==a++&&(e[r]=n)}return e},Ec=function(e,t,n,r){for(var o=t.length,a=n.length,i=0,c=0;i<o||c<a;)e[i+c]=i<o&&c<a?r(t[i],n[c])<=0?t[i++]:n[c++]:i<o?t[i++]:n[c++];return e},Pc=Oc,Ac=z,Zc=function(e,t){var n=[][e];return!!n&&Ac((function(){n.call(null,t||function(){return 1},1)}))},Tc=Be.match(/firefox\/(\d+)/i),Nc=!!Tc&&+Tc[1],Cc=/MSIE|Trident/.test(Be),Wc=Be.match(/AppleWebKit\/(\d+)\./),_c=!!Wc&&+Wc[1],Kc=pa,Uc=te,Dc=qt,Fc=Ae,Mc=Zn,Lc=vc,Rc=z,Bc=Pc,qc=Zc,Gc=Nc,Vc=Cc,$c=Je,zc=_c,Hc=[],Jc=Uc(Hc.sort),Xc=Uc(Hc.push),Yc=Rc((function(){Hc.sort(void 0)})),Qc=Rc((function(){Hc.sort(null)})),es=qc("sort"),ts=!Rc((function(){if($c)return $c<70;if(!(Gc&&Gc>3)){if(Vc)return!0;if(zc)return zc<603;var e,t,n,r,o="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2}for(r=0;r<47;r++)Hc.push({k:t+r,v:n})}for(Hc.sort((function(e,t){return t.v-e.v})),r=0;r<Hc.length;r++)t=Hc[r].k.charAt(0),o.charAt(o.length-1)!==t&&(o+=t);return"DGBEFHACIJK"!==o}}));Kc({target:"Array",proto:!0,forced:Yc||!Qc||!es||!ts},{sort:function(e){void 0!==e&&Dc(e);var t=Fc(this);if(ts)return void 0===e?Jc(t):Jc(t,e);var n,r,o=[],a=Mc(t);for(r=0;r<a;r++)r in t&&Xc(o,t[r]);for(Bc(o,function(e){return function(t,n){return void 0===n?-1:void 0===t?1:void 0!==e?+e(t,n)||0:Lc(t)>Lc(n)?1:-1}}(e)),n=o.length,r=0;r<n;)t[r]=o[r++];for(;r<a;)delete t[r++];return t}});var ns=pa,rs=yt,os=$,as=te,is=Ne,cs=De,ss=Nt,us=vc,ls=kt.f,ds=Jo,fs=os.Symbol,ps=fs&&fs.prototype;if(rs&&cs(fs)&&(!("description"in ps)||void 0!==fs().description)){var vs={},hs=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:us(arguments[0]),t=ss(ps,this)?new fs(e):void 0===e?fs():fs(e);return""===e&&(vs[t]=!0),t};ds(hs,fs),hs.prototype=ps,ps.constructor=hs;var gs="Symbol(test)"==String(fs("test")),ms=as(ps.toString),ws=as(ps.valueOf),bs=/^Symbol\((.*)\)[^)]+$/,ys=as("".replace),xs=as("".slice);ls(ps,"description",{configurable:!0,get:function(){var e=ws(this),t=ms(e);if(is(vs,e))return"";var n=gs?xs(t,7,-1):ys(t,bs,"$1");return""===n?void 0:n}}),ns({global:!0,forced:!0},{Symbol:hs})}var ks=qt,js=Ae,Is=de,Os=Zn,Ss=$.TypeError,Es=function(e){return function(t,n,r,o){ks(n);var a=js(t),i=Is(a),c=Os(a),s=e?c-1:0,u=e?-1:1;if(r<2)for(;;){if(s in i){o=i[s],s+=u;break}if(s+=u,e?s<0:c<=s)throw Ss("Reduce of empty array with no initial value")}for(;e?s>=0:c>s;s+=u)s in i&&(o=n(o,i[s],s,a));return o}},Ps={left:Es(!1),right:Es(!0)},As="process"==ae($.process),Zs=Ps.left,Ts=Je,Ns=As;function Cs(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(t){a(t)}}function c(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}s((r=r.apply(e,t||[])).next())}))}pa({target:"Array",proto:!0,forced:!Zc("reduce")||!Ns&&Ts>79&&Ts<83},{reduce:function(e){var t=arguments.length;return Zs(this,e,t,t>1?arguments[1]:void 0)}});const Ws=({selector:e,options:t,onWalletNotInstalled:n,onError:o,onConnectHardwareWallet:a,onConnecting:i,onConnected:c})=>{const[s,u]=(0,r.useState)(!1),[l,d]=(0,r.useState)([]);(0,r.useEffect)((()=>{const t=e.store.observable.subscribe((e=>{e.modules.sort(((e,t)=>e.metadata.deprecated===t.metadata.deprecated?0:e.metadata.deprecated?1:-1)),d(e.modules)}));return()=>t.unsubscribe()}),[]);const f=e=>()=>Cs(void 0,void 0,void 0,(function*(){try{const{deprecated:r,available:s}=e.metadata;if("injected"===e.type&&!s)return n(e);if(r)return o(new Error(`${e.metadata.name} is deprecated. Please select another wallet.`));const u=yield e.wallet();if(i(u),"hardware"===u.type)return a();yield u.signIn({contractId:t.contractId,methodNames:t.methodNames}),c()}catch(r){const{name:t}=e.metadata,n=r instanceof Error?r.message:"Something went wrong";o(new Error(`Failed to sign in with ${t}: ${n}`))}}));return(0,B.jsxs)(r.Fragment,{children:[(0,B.jsxs)("div",Object.assign({className:"wallet-options-wrapper"},{children:[(0,B.jsx)("p",Object.assign({className:"description"},{children:(null===t||void 0===t?void 0:t.description)||"Please select a wallet to sign in to this dApp:"}),void 0),(0,B.jsx)("ul",Object.assign({className:"options-list"},{children:l.reduce(((t,n)=>{const{selectedWalletId:r}=e.store.getState(),{name:o,description:a,iconUrl:i,deprecated:c}=n.metadata,s=n.id===r;return t.push((0,B.jsx)("li",Object.assign({id:n.id,className:(s?"selected-wallet":"")+(c?" deprecated-wallet":""),onClick:s?void 0:f(n)},{children:(0,B.jsxs)("div",Object.assign({title:a||"",className:"wallet-content"},{children:[(0,B.jsx)("div",Object.assign({className:"wallet-img-box"},{children:(0,B.jsx)("img",{src:i,alt:o},void 0)}),void 0),(0,B.jsx)("div",{children:(0,B.jsx)("span",{children:o},void 0)},void 0),s&&(0,B.jsx)("div",Object.assign({className:"selected-wallet-text"},{children:(0,B.jsx)("span",{children:"selected"},void 0)}),void 0)]}),void 0)}),n.id)),t}),[])}),void 0)]}),void 0),(0,B.jsxs)("div",Object.assign({className:"info"},{children:[(0,B.jsx)("span",Object.assign({onClick:()=>{u(!s)}},{children:"What is a Wallet?"}),void 0),(0,B.jsx)("div",Object.assign({className:`info-description ${s?"show":"hide"}-explanation`},{children:(0,B.jsx)("p",{children:"Wallets are used to send, receive and store digital assets. There are different types of wallets. They can be an extension added to your browser, a hardware device plugged into your computer, web-based or an app on your mobile device."},void 0)}),void 0)]}),void 0)]},void 0)},_s=({message:e,onBack:t})=>(0,B.jsxs)("div",Object.assign({className:"alert-message-wrapper"},{children:[(0,B.jsx)("p",{children:e},void 0),(0,B.jsx)("div",Object.assign({className:"action-buttons"},{children:(0,B.jsx)("button",Object.assign({className:"left-button",onClick:t},{children:"OK"}),void 0)}),void 0)]}),void 0),Ks=({onClick:e})=>(0,B.jsx)("button",Object.assign({onClick:e,className:"close-button"},{children:(0,B.jsxs)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:"#A7A7A7"},{children:[(0,B.jsx)("path",{d:"M0 0h24v24H0z",fill:"none"},void 0),(0,B.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},void 0)]}),void 0)}),void 0);var Us=$.Promise,Ds=go.exports,Fs=Re,Ms=kt,Ls=yt,Rs=dt("species"),Bs=Nt,qs=$.TypeError,Gs=qt,Vs=H,$s=te(te.bind),zs=function(e,t){return Gs(e),void 0===t?e:Vs?$s(e,t):function(){return e.apply(t,arguments)}},Hs=xr,Js=dt("iterator"),Xs=Array.prototype,Ys=dc,Qs=Vt,eu=xr,tu=dt("iterator"),nu=function(e){if(void 0!=e)return Qs(e,tu)||Qs(e,"@@iterator")||eu[Ys(e)]},ru=Tt,ou=qt,au=wt,iu=Mt,cu=nu,su=$.TypeError,uu=Tt,lu=wt,du=Vt,fu=zs,pu=Tt,vu=wt,hu=Mt,gu=function(e){return void 0!==e&&(Hs.Array===e||Xs[Js]===e)},mu=Zn,wu=Nt,bu=function(e,t){var n=arguments.length<2?cu(e):t;if(ou(n))return au(ru(n,e));throw su(iu(e)+" is not iterable")},yu=nu,xu=function(e,t,n){var r,o;lu(e);try{if(!(r=du(e,"return"))){if("throw"===t)throw n;return n}r=uu(r,e)}catch(Jp){o=!0,r=Jp}if("throw"===t)throw n;if(o)throw r;return lu(r),n},ku=$.TypeError,ju=function(e,t){this.stopped=e,this.result=t},Iu=ju.prototype,Ou=dt("iterator"),Su=!1;try{var Eu=0,Pu={next:function(){return{done:!!Eu++}},return:function(){Su=!0}};Pu[Ou]=function(){return this},Array.from(Pu,(function(){throw 2}))}catch(Jp){}var Au=te,Zu=z,Tu=De,Nu=dc,Cu=Pr,Wu=function(){},_u=[],Ku=Re("Reflect","construct"),Uu=/^\s*(?:class|function)\b/,Du=Au(Uu.exec),Fu=!Uu.exec(Wu),Mu=function(e){if(!Tu(e))return!1;try{return Ku(Wu,_u,e),!0}catch(Jp){return!1}},Lu=function(e){if(!Tu(e))return!1;switch(Nu(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Fu||!!Du(Uu,Cu(e))}catch(Jp){return!0}};Lu.sham=!0;var Ru,Bu,qu,Gu,Vu=!Ku||Zu((function(){var e;return Mu(Mu.call)||!Mu(Object)||!Mu((function(){e=!0}))||e}))?Lu:Mu,$u=Vu,zu=Mt,Hu=$.TypeError,Ju=wt,Xu=function(e){if($u(e))return e;throw Hu(zu(e)+" is not a constructor")},Yu=dt("species"),Qu=H,el=Function.prototype,tl=el.apply,nl=el.call,rl="object"==typeof Reflect&&Reflect.apply||(Qu?nl.bind(tl):function(){return nl.apply(tl,arguments)}),ol=te([].slice),al=$.TypeError,il=/(?:ipad|iphone|ipod).*applewebkit/i.test(Be),cl=$,sl=rl,ul=zs,ll=De,dl=Ne,fl=z,pl=er,vl=ol,hl=St,gl=function(e,t){if(e<t)throw al("Not enough arguments");return e},ml=il,wl=As,bl=cl.setImmediate,yl=cl.clearImmediate,xl=cl.process,kl=cl.Dispatch,jl=cl.Function,Il=cl.MessageChannel,Ol=cl.String,Sl=0,El={},Pl="onreadystatechange";try{Ru=cl.location}catch(Jp){}var Al=function(e){if(dl(El,e)){var t=El[e];delete El[e],t()}},Zl=function(e){return function(){Al(e)}},Tl=function(e){Al(e.data)},Nl=function(e){cl.postMessage(Ol(e),Ru.protocol+"//"+Ru.host)};bl&&yl||(bl=function(e){gl(arguments.length,1);var t=ll(e)?e:jl(e),n=vl(arguments,1);return El[++Sl]=function(){sl(t,void 0,n)},Bu(Sl),Sl},yl=function(e){delete El[e]},wl?Bu=function(e){xl.nextTick(Zl(e))}:kl&&kl.now?Bu=function(e){kl.now(Zl(e))}:Il&&!ml?(Gu=(qu=new Il).port2,qu.port1.onmessage=Tl,Bu=ul(Gu.postMessage,Gu)):cl.addEventListener&&ll(cl.postMessage)&&!cl.importScripts&&Ru&&"file:"!==Ru.protocol&&!fl(Nl)?(Bu=Nl,cl.addEventListener("message",Tl,!1)):Bu=Pl in hl("script")?function(e){pl.appendChild(hl("script")).onreadystatechange=function(){pl.removeChild(this),Al(e)}}:function(e){setTimeout(Zl(e),0)});var Cl,Wl,_l,Kl,Ul,Dl,Fl,Ml,Ll={set:bl,clear:yl},Rl=$,Bl=/ipad|iphone|ipod/i.test(Be)&&void 0!==Rl.Pebble,ql=/web0s(?!.*chrome)/i.test(Be),Gl=$,Vl=zs,$l=to.f,zl=Ll.set,Hl=il,Jl=Bl,Xl=ql,Yl=As,Ql=Gl.MutationObserver||Gl.WebKitMutationObserver,ed=Gl.document,td=Gl.process,nd=Gl.Promise,rd=$l(Gl,"queueMicrotask"),od=rd&&rd.value;od||(Cl=function(){var e,t;for(Yl&&(e=td.domain)&&e.exit();Wl;){t=Wl.fn,Wl=Wl.next;try{t()}catch(Jp){throw Wl?Kl():_l=void 0,Jp}}_l=void 0,e&&e.enter()},Hl||Yl||Xl||!Ql||!ed?!Jl&&nd&&nd.resolve?((Fl=nd.resolve(void 0)).constructor=nd,Ml=Vl(Fl.then,Fl),Kl=function(){Ml(Cl)}):Yl?Kl=function(){td.nextTick(Cl)}:(zl=Vl(zl,Gl),Kl=function(){zl(Cl)}):(Ul=!0,Dl=ed.createTextNode(""),new Ql(Cl).observe(Dl,{characterData:!0}),Kl=function(){Dl.data=Ul=!Ul}));var ad=od||function(e){var t={fn:e,next:void 0};_l&&(_l.next=t),Wl||(Wl=t,Kl()),_l=t},id={},cd=qt,sd=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=cd(t),this.reject=cd(n)};id.f=function(e){return new sd(e)};var ud=wt,ld=pt,dd=id,fd=$,pd=function(){this.head=null,this.tail=null};pd.prototype={add:function(e){var t={item:e,next:null};this.head?this.tail.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e)return this.head=e.next,this.tail===e&&(this.tail=null),e.item}};var vd,hd,gd,md,wd=pd,bd="object"==typeof window,yd=pa,xd=$,kd=Re,jd=Tt,Id=Us,Od=go.exports,Sd=function(e,t,n){for(var r in t)Ds(e,r,t[r],n);return e},Ed=Ha,Pd=_a,Ad=function(e){var t=Fs(e),n=Ms.f;Ls&&t&&!t[Rs]&&n(t,Rs,{configurable:!0,get:function(){return this}})},Zd=qt,Td=De,Nd=pt,Cd=function(e,t){if(Bs(t,e))return e;throw qs("Incorrect invocation")},Wd=Pr,_d=function(e,t,n){var r,o,a,i,c,s,u,l=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=fu(t,l),h=function(e){return r&&xu(r,"normal",e),new ju(!0,e)},g=function(e){return d?(vu(e),p?v(e[0],e[1],h):v(e[0],e[1])):p?v(e,h):v(e)};if(f)r=e;else{if(!(o=yu(e)))throw ku(hu(e)+" is not iterable");if(gu(o)){for(a=0,i=mu(e);i>a;a++)if((c=g(e[a]))&&wu(Iu,c))return c;return new ju(!1)}r=bu(e,o)}for(s=r.next;!(u=pu(s,r)).done;){try{c=g(u.value)}catch(Jp){xu(r,"throw",Jp)}if("object"==typeof c&&c&&wu(Iu,c))return c}return new ju(!1)},Kd=function(e,t){if(!t&&!Su)return!1;var n=!1;try{var r={};r[Ou]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch(Jp){}return n},Ud=function(e,t){var n,r=Ju(e).constructor;return void 0===r||void 0==(n=Ju(r)[Yu])?t:Xu(n)},Dd=Ll.set,Fd=ad,Md=function(e,t){if(ud(e),ld(t)&&t.constructor===e)return t;var n=dd.f(e);return(0,n.resolve)(t),n.promise},Ld=function(e,t){var n=fd.console;n&&n.error&&(1==arguments.length?n.error(e):n.error(e,t))},Rd=id,Bd=function(e){try{return{error:!1,value:e()}}catch(Jp){return{error:!0,value:Jp}}},qd=wd,Gd=eo,Vd=aa,$d=bd,zd=As,Hd=Je,Jd=dt("species"),Xd="Promise",Yd=Gd.getterFor(Xd),Qd=Gd.set,ef=Gd.getterFor(Xd),tf=Id&&Id.prototype,nf=Id,rf=tf,of=xd.TypeError,af=xd.document,cf=xd.process,sf=Rd.f,uf=sf,lf=!!(af&&af.createEvent&&xd.dispatchEvent),df=Td(xd.PromiseRejectionEvent),ff="unhandledrejection",pf=!1,vf=Vd(Xd,(function(){var e=Wd(nf),t=e!==String(nf);if(!t&&66===Hd)return!0;if(Hd>=51&&/native code/.test(e))return!1;var n=new nf((function(e){e(1)})),r=function(e){e((function(){}),(function(){}))};return(n.constructor={})[Jd]=r,!(pf=n.then((function(){}))instanceof r)||!t&&$d&&!df})),hf=vf||!Kd((function(e){nf.all(e).catch((function(){}))})),gf=function(e){var t;return!(!Nd(e)||!Td(t=e.then))&&t},mf=function(e,t){var n,r,o,a=t.value,i=1==t.state,c=i?e.ok:e.fail,s=e.resolve,u=e.reject,l=e.domain;try{c?(i||(2===t.rejection&&kf(t),t.rejection=1),!0===c?n=a:(l&&l.enter(),n=c(a),l&&(l.exit(),o=!0)),n===e.promise?u(of("Promise-chain cycle")):(r=gf(n))?jd(r,n,s,u):s(n)):u(a)}catch(Jp){l&&!o&&l.exit(),u(Jp)}},wf=function(e,t){e.notified||(e.notified=!0,Fd((function(){for(var n,r=e.reactions;n=r.get();)mf(n,e);e.notified=!1,t&&!e.rejection&&yf(e)})))},bf=function(e,t,n){var r,o;lf?((r=af.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),xd.dispatchEvent(r)):r={promise:t,reason:n},!df&&(o=xd["on"+e])?o(r):e===ff&&Ld("Unhandled promise rejection",n)},yf=function(e){jd(Dd,xd,(function(){var t,n=e.facade,r=e.value;if(xf(e)&&(t=Bd((function(){zd?cf.emit("unhandledRejection",r,n):bf(ff,n,r)})),e.rejection=zd||xf(e)?2:1,t.error))throw t.value}))},xf=function(e){return 1!==e.rejection&&!e.parent},kf=function(e){jd(Dd,xd,(function(){var t=e.facade;zd?cf.emit("rejectionHandled",t):bf("rejectionhandled",t,e.value)}))},jf=function(e,t,n){return function(r){e(t,r,n)}},If=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,wf(e,!0))},Of=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw of("Promise can't be resolved itself");var r=gf(t);r?Fd((function(){var n={done:!1};try{jd(r,t,jf(Of,n,e),jf(If,n,e))}catch(Jp){If(n,Jp,e)}})):(e.value=t,e.state=1,wf(e,!1))}catch(Jp){If({done:!1},Jp,e)}}};if(vf&&(rf=(nf=function(e){Cd(this,rf),Zd(e),jd(vd,this);var t=Yd(this);try{e(jf(Of,t),jf(If,t))}catch(Jp){If(t,Jp)}}).prototype,(vd=function(e){Qd(this,{type:Xd,done:!1,notified:!1,parent:!1,reactions:new qd,rejection:!1,state:0,value:void 0})}).prototype=Sd(rf,{then:function(e,t){var n=ef(this),r=sf(Ud(this,nf));return n.parent=!0,r.ok=!Td(e)||e,r.fail=Td(t)&&t,r.domain=zd?cf.domain:void 0,0==n.state?n.reactions.add(r):Fd((function(){mf(r,n)})),r.promise},catch:function(e){return this.then(void 0,e)}}),hd=function(){var e=new vd,t=Yd(e);this.promise=e,this.resolve=jf(Of,t),this.reject=jf(If,t)},Rd.f=sf=function(e){return e===nf||e===gd?new hd(e):uf(e)},Td(Id)&&tf!==Object.prototype)){md=tf.then,pf||(Od(tf,"then",(function(e,t){var n=this;return new nf((function(e,t){jd(md,n,e,t)})).then(e,t)}),{unsafe:!0}),Od(tf,"catch",rf.catch,{unsafe:!0}));try{delete tf.constructor}catch(Jp){}Ed&&Ed(tf,rf)}yd({global:!0,wrap:!0,forced:vf},{Promise:nf}),Pd(nf,Xd,!1),Ad(Xd),gd=kd(Xd),yd({target:Xd,stat:!0,forced:vf},{reject:function(e){var t=sf(this);return jd(t.reject,void 0,e),t.promise}}),yd({target:Xd,stat:!0,forced:vf},{resolve:function(e){return Md(this,e)}}),yd({target:Xd,stat:!0,forced:hf},{all:function(e){var t=this,n=sf(t),r=n.resolve,o=n.reject,a=Bd((function(){var n=Zd(t.resolve),a=[],i=0,c=1;_d(e,(function(e){var s=i++,u=!1;c++,jd(n,t,e).then((function(e){u||(u=!0,a[s]=e,--c||r(a))}),o)})),--c||r(a)}));return a.error&&o(a.value),n.promise},race:function(e){var t=this,n=sf(t),r=n.reject,o=Bd((function(){var o=Zd(t.resolve);_d(e,(function(e){jd(o,t,e).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});const Sf=({hardwareWalletAccounts:e,onAccountChanged:t,onSubmit:n})=>(0,B.jsxs)("div",Object.assign({className:"choose-ledger-account-form-wrapper"},{children:[(0,B.jsx)("p",{children:"Multiple accounts found. Please choose an account per derivation path."},void 0),(0,B.jsx)("form",Object.assign({className:"form",onSubmit:t=>{n(e,t)}},{children:(0,B.jsxs)("div",{children:[e.map(((e,n)=>(0,B.jsxs)("div",Object.assign({className:"form-control"},{children:[(0,B.jsx)("label",{children:e.derivationPath},void 0),(0,B.jsx)("select",Object.assign({disabled:1===e.accountIds.length,defaultValue:e.selectedAccountId,onChange:n=>{t(e.derivationPath,n.target.value)}},{children:e.accountIds.map((e=>(0,B.jsx)("option",Object.assign({value:e},{children:e}),e)))}),void 0)]}),n))),(0,B.jsx)("div",Object.assign({className:"action-buttons"},{children:(0,B.jsx)("button",Object.assign({className:"right-button",type:"submit"},{children:"Connect"}),void 0)}),void 0)]},void 0)}),void 0)]}),void 0),Ef=({wallet:e,onBack:t})=>(0,B.jsxs)("div",Object.assign({className:"connecting-wrapper"},{children:[(0,B.jsxs)("div",Object.assign({className:"content"},{children:[(0,B.jsx)("div",Object.assign({className:"spinner",id:null===e||void 0===e?void 0:e.id},{children:(0,B.jsx)("div",Object.assign({className:"icon"},{children:(0,B.jsx)("img",{src:null===e||void 0===e?void 0:e.metadata.iconUrl,alt:""},void 0)}),void 0)}),void 0),(0,B.jsx)("span",{children:"Connecting..."},void 0)]}),void 0),(0,B.jsx)("div",Object.assign({className:"action-buttons"},{children:(0,B.jsx)("button",Object.assign({className:"left-button",onClick:t},{children:"Back"}),void 0)}),void 0)]}),void 0),Pf=({selector:e,options:t,onBack:n,onConnected:o,params:a,onError:i})=>{const[c,s]=(0,r.useState)([{path:"44'/397'/0'/0'/1'"}]),[u,l]=(0,r.useState)([]),[d,f]=(0,r.useState)(!1),[p,v]=(0,r.useState)(!1),[h,g]=(0,r.useState)(),m=t=>Cs(void 0,void 0,void 0,(function*(){const n=yield fetch(`${e.options.network.indexerUrl}/publicKey/ed25519:${t}/accounts`);if(!n.ok)throw new Error("Failed to get account id from public key");const r=yield n.json();if(!Array.isArray(r)||!r.length)throw new Error("Failed to find account linked for public key: "+t);return r})),w=(e,t,n,r)=>e.signIn({contractId:t,methodNames:n,accounts:r}).then((()=>o())).catch((e=>{i(`Error: ${e.message}`)})),b=()=>Cs(void 0,void 0,void 0,(function*(){const n=yield e.wallet(a.walletId);if("hardware"===n.type){v(!0),g(n);try{const e=yield(e=>Cs(void 0,void 0,void 0,(function*(){const t=[];for(let n=0;n<c.length;n+=1){const r=c[n].path;if("hardware"===e.type){const n=yield e.getPublicKey(r),o=yield m(n);t.push({derivationPath:r,publicKey:n,accountIds:o,selectedAccountId:o[0]})}}return t})))(n);if(!e.some((e=>e.accountIds.length>1))){const r=e.map((e=>({derivationPath:e.derivationPath,publicKey:e.publicKey,accountId:e.accountIds[0]})));return w(n,t.contractId,t.methodNames,r)}v(!1),l(e),f(!0)}catch(r){v(!1);const e=r instanceof Error?r.message:"Something went wrong";i(e)}finally{v(!1)}}})),y=e=>Cs(void 0,void 0,void 0,(function*(){"Enter"===e.key&&(yield b())}));return p?(0,B.jsx)("div",Object.assign({className:"derivation-path-wrapper"},{children:(0,B.jsx)(Ef,{wallet:h,onBack:()=>{v(!1)}},void 0)}),void 0):(0,B.jsx)("div",Object.assign({className:"derivation-path-wrapper"},{children:d?(0,B.jsx)(Sf,{hardwareWalletAccounts:u,onAccountChanged:(e,t)=>{((e,t)=>{l((n=>[...n.map((n=>{const r=e===n.derivationPath?t:n.selectedAccountId;return Object.assign(Object.assign({},n),{selectedAccountId:r})}))]))})(e,t)},onSubmit:(e,n)=>{n.preventDefault();(e=>{Cs(void 0,void 0,void 0,(function*(){yield w(h,t.contractId,t.methodNames,e)}))})(e.map((e=>({derivationPath:e.derivationPath,publicKey:e.publicKey,accountId:e.selectedAccountId}))))}},void 0):(0,B.jsxs)("div",{children:[(0,B.jsx)("p",{children:"Make sure your device is plugged in, then enter an account id to connect:"},void 0),(0,B.jsx)("div",Object.assign({className:"derivation-path-list"},{children:c.map(((e,t)=>(0,B.jsxs)("div",{children:[(0,B.jsx)("input",{type:"text",placeholder:"Derivation Path",value:0===t?c[0].path:e.path,onChange:e=>{((e,t)=>{s((n=>(n[e].path=t.target.value,[...n])))})(t,e)},onKeyPress:y},void 0),0!==t&&(0,B.jsx)("button",Object.assign({type:"button",title:"Remove",onClick:()=>(e=>{s((t=>(t.splice(e,1),[...t])))})(t)},{children:"-"}),void 0),t===c.length-1&&(0,B.jsx)("button",Object.assign({title:"Add",type:"button",onClick:()=>{s((e=>[...e,{path:""}]))}},{children:"+"}),void 0)]},t)))}),void 0),(0,B.jsxs)("div",Object.assign({className:"action-buttons"},{children:[(0,B.jsx)("button",Object.assign({className:"left-button",onClick:n},{children:"Back"}),void 0),(0,B.jsx)("button",Object.assign({className:"right-button",onClick:b},{children:"Connect"}),void 0)]}),void 0)]},void 0)}),void 0)},Af=({module:e,onBack:t})=>(0,B.jsxs)("div",Object.assign({className:"wallet-not-installed-wrapper"},{children:[(0,B.jsxs)("div",Object.assign({className:"wallet-data"},{children:[(0,B.jsx)("div",Object.assign({className:`wallet-icon-box ${e.id}`},{children:(0,B.jsx)("img",{src:e.metadata.iconUrl,alt:e.metadata.name},void 0)}),void 0),(0,B.jsx)("p",{children:e.metadata.name},void 0)]}),void 0),(0,B.jsxs)("p",{children:[`You'll need to install ${e.metadata.name} to continue. After installing`,(0,B.jsx)("span",Object.assign({className:"refresh-link",onClick:()=>window.location.reload()},{children:"\xa0refresh the page."}),void 0)]},void 0),(0,B.jsxs)("div",Object.assign({className:"action-buttons"},{children:[(0,B.jsx)("button",Object.assign({className:"left-button",onClick:t},{children:"Back"}),void 0),(0,B.jsx)("button",Object.assign({className:"right-button",onClick:()=>{"injected"===e.type&&window.open(e.metadata.downloadUrl,"_blank")}},{children:`Open ${e.metadata.name}`}),void 0)]}),void 0)]}),void 0),Zf=e=>{switch(e){case"dark":return"dark-theme";case"light":return"light-theme";default:return""}},Tf=({selector:e,options:t,visible:n,hide:o})=>{var a,i;const[c,s]=(0,r.useState)({name:"WalletOptions"}),[u,l]=(0,r.useState)(null);(0,r.useEffect)((()=>{s({name:"WalletOptions"})}),[n]),(0,r.useEffect)((()=>{const t=e.on("networkChanged",(({networkId:t})=>{if(t===e.options.network.networkId)return d();s({name:"WalletNetworkChanged"})}));return()=>t.remove()}),[]);const d=(0,r.useCallback)((()=>{l(null),s({name:"WalletOptions"}),o()}),[o]);return(0,r.useEffect)((()=>{const e=e=>{"Escape"===e.key&&d()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[d]),n?(0,B.jsxs)("div",Object.assign({className:`nws-modal-wrapper ${Zf(null===t||void 0===t?void 0:t.theme)} ${n?"open":""}`},{children:[(0,B.jsx)("div",{className:"modal-overlay",onClick:d},void 0),(0,B.jsxs)("div",Object.assign({className:"modal"},{children:[(0,B.jsxs)("div",Object.assign({className:"modal-header"},{children:[(0,B.jsx)("h2",{children:"Connect Wallet"},void 0),(0,B.jsx)(Ks,{onClick:d},void 0)]}),void 0),(0,B.jsxs)("div",Object.assign({className:"modal-body"},{children:["AlertMessage"===c.name&&u&&(0,B.jsx)(_s,{message:u,onBack:()=>{l(null),s({name:"WalletOptions"})}},void 0),"WalletOptions"===c.name&&(0,B.jsx)(Ws,{selector:e,options:t,onWalletNotInstalled:e=>{s({name:"WalletNotInstalled",params:{module:e}})},onConnectHardwareWallet:()=>{s({name:"DerivationPath",params:{walletId:e.store.getState().selectedWalletId||"ledger"}})},onConnecting:e=>{s({name:"WalletConnecting",params:{wallet:e}})},onConnected:d,onError:e=>{l(e.message),s({name:"AlertMessage"})}},void 0),"DerivationPath"===c.name&&(0,B.jsx)(Pf,{selector:e,options:t,onConnected:d,params:c.params,onBack:()=>s({name:"WalletOptions"}),onError:e=>{l(e),s({name:"AlertMessage"})}},void 0),"WalletNetworkChanged"===c.name&&(0,B.jsx)(nc,{selector:e,onSwitchWallet:()=>s({name:"WalletOptions"}),onDismiss:d},void 0),"WalletNotInstalled"===c.name&&(0,B.jsx)(Af,{module:null===(a=c.params)||void 0===a?void 0:a.module,onBack:()=>{s({name:"WalletOptions"})}},void 0),"WalletConnecting"===c.name&&(0,B.jsx)(Ef,{wallet:null===(i=c.params)||void 0===i?void 0:i.wallet,onBack:()=>{s({name:"WalletOptions"})}},void 0)]}),void 0)]}),void 0)]}),void 0):null},Nf="near-wallet-selector-modal";let Cf=null;const Wf=(e,t)=>{const n=document.createElement("div");n.id=Nf,document.body.appendChild(n);const r=(n=!1)=>{q.render((0,B.jsx)(Tf,{selector:e,options:t,visible:n,hide:()=>r(!1)},void 0),document.getElementById(Nf))};return r(),Cf||(Cf={show:()=>{r(!0)},hide:()=>{r(!1)}}),Cf};var _f=n(2197),Kf=function(e){switch(e.type){case"CreateAccount":return f.transactions.createAccount();case"DeployContract":var t=e.params.code;return f.transactions.deployContract(t);case"FunctionCall":var n=e.params,r=n.methodName,o=n.args,a=n.gas,i=n.deposit;return f.transactions.functionCall(r,o,new _f.BN(a),new _f.BN(i));case"Transfer":var c=e.params.deposit;return f.transactions.transfer(new _f.BN(c));case"Stake":var s=e.params,u=s.stake,l=s.publicKey;return f.transactions.stake(new _f.BN(u),f.utils.PublicKey.from(l));case"AddKey":var d=e.params,p=d.publicKey,v=d.accessKey;return f.transactions.addKey(f.utils.PublicKey.from(p),function(e){if("FullAccess"===e)return f.transactions.fullAccessKey();var t=e.receiverId,n=e.methodNames,r=void 0===n?[]:n,o=e.allowance?new _f.BN(e.allowance):void 0;return f.transactions.functionCallAccessKey(t,r,o)}(v.permission));case"DeleteKey":var h=e.params.publicKey;return f.transactions.deleteKey(f.utils.PublicKey.from(h));case"DeleteAccount":var g=e.params.beneficiaryId;return f.transactions.deleteAccount(g);default:throw new Error("Invalid action type")}},Uf=n(7113),Df=function(){var e=(0,o.Z)(i().mark((function e(t,n,r){var o,a,c,s,u,l,d,p,v,h,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new f.providers.JsonRpcProvider({url:r.nodeUrl}),a=[],c=0;case 3:if(!(c<t.length)){e.next=22;break}return e.next=6,n.getPublicKey(t[c].signerId,r.networkId);case 6:return s=e.sent,e.next=9,Promise.all([o.block({finality:"final"}),o.query({request_type:"view_access_key",finality:"final",account_id:t[c].signerId,public_key:s.toString()})]);case 9:return u=e.sent,l=(0,Uf.Z)(u,2),d=l[0],p=l[1],v=t[c].actions.map((function(e){return Kf(e)})),h=f.transactions.createTransaction(t[c].signerId,f.utils.PublicKey.from(s.toString()),t[c].receiverId,p.nonce+c+1,v,f.utils.serialize.base_decode(d.header.hash)),e.next=17,f.transactions.signTransaction(h,n,t[c].signerId,r.networkId);case 17:g=e.sent,a.push(g[1]);case 19:c++,e.next=3;break;case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Ff(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ff(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ff(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lf=function(e,t){if(t)return t;switch(e.networkId){case"mainnet":return"https://app.mynearwallet.com";case"testnet":return"https://testnet.mynearwallet.com";default:throw new Error("Invalid wallet url")}},Rf=function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new f.keyStores.BrowserLocalStorageKeyStore,e.next=3,(0,f.connect)(Mf(Mf({keyStore:r,walletUrl:t.walletUrl},n),{},{headers:{}}));case 3:if(o=e.sent,(a=new f.WalletConnection(o,"near_app")).isSignedIn()){e.next=8;break}return e.next=8,r.clear();case 8:return e.abrupt("return",{wallet:a,keyStore:r});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bf=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.store,a=t.params,c=t.logger,e.next=3,Rf(a,n.network);case 3:return s=e.sent,u=function(){s.keyStore.clear()},l=function(){var e=s.wallet.getAccountId();return e?[{accountId:e}]:[]},d=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.wallet.account(),r=n.connection,a=r.networkId,c=r.signer,u=r.provider,e.next=4,c.getPublicKey(n.accountId,a);case 4:return l=e.sent,e.abrupt("return",Promise.all(t.map(function(){var e=(0,o.Z)(i().mark((function e(t,r){var o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.actions.map((function(e){return Kf(e)})),e.next=3,n.accessKeyForTransaction(t.receiverId,o,l);case 3:if(a=e.sent){e.next=6;break}throw new Error("Failed to find matching key for transaction sent to ".concat(t.receiverId));case 6:return e.next=8,u.block({finality:"final"});case 8:return c=e.sent,e.abrupt("return",f.transactions.createTransaction(n.accountId,f.utils.PublicKey.from(a.public_key),t.receiverId,a.access_key.nonce+r+1,o,f.utils.serialize.base_decode(c.header.hash)));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.abrupt("return",{signIn:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.contractId,r=e.methodNames,!(o=l()).length){t.next=4;break}return t.abrupt("return",o);case 4:return t.next=6,s.wallet.requestSignIn({contractId:n,methodNames:r});case 6:return t.abrupt("return",l());case 7:case"end":return t.stop()}}),t)})))()},signOut:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.wallet.isSignedIn()&&s.wallet.signOut(),u();case 2:case"end":return e.stop()}}),e)})))()},getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l());case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var n,o,a,u,l,d,f;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.signerId,o=e.receiverId,a=e.actions,u=e.callbackUrl,c.log("signAndSendTransaction",{signerId:n,receiverId:o,actions:a,callbackUrl:u}),l=r.getState(),d=l.contract,s.wallet.isSignedIn()&&d){t.next=5;break}throw new Error("Wallet not signed in");case 5:return f=s.wallet.account(),t.abrupt("return",f.signAndSendTransaction({receiverId:o||d.contractId,actions:a.map((function(e){return Kf(e)})),walletCallbackUrl:u}).then((function(){})));case 7:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.transactions,r=e.callbackUrl,c.log("signAndSendTransactions",{transactions:n,callbackUrl:r}),s.wallet.isSignedIn()){t.next=4;break}throw new Error("Wallet not signed in");case 4:return t.t0=s.wallet,t.next=7,d(n);case 7:return t.t1=t.sent,t.t2=r,t.t3={transactions:t.t1,callbackUrl:t.t2},t.abrupt("return",t.t0.requestSignTransactions.call(t.t0,t.t3));case 11:case"end":return t.stop()}}),t)})))()}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function qf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.walletUrl,n=e.iconUrl,r=void 0===n?"./assets/my-near-wallet-icon.png":n;return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:"my-near-wallet",type:"browser",metadata:{name:"MyNearWallet",description:null,iconUrl:r,deprecated:!1,available:!0},init:function(e){return Bf(Mf(Mf({},e),{},{params:{walletUrl:Lf(e.options.network,t)}}))}});case 1:case"end":return e.stop()}}),e)})))}function Gf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gf(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $f=function(e,t){if(t)return t;switch(e.networkId){case"mainnet":return"https://wallet.near.org";case"testnet":return"https://wallet.testnet.near.org";default:throw new Error("Invalid wallet url")}};function zf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.walletUrl,n=e.iconUrl,r=void 0===n?"./assets/near-wallet-icon.png":n;return function(){var e=(0,o.Z)(i().mark((function e(n){var o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qf({walletUrl:$f(n.options.network,t),iconUrl:r})(n);case 2:if(o=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",Vf(Vf({},o),{},{id:"near-wallet",metadata:Vf(Vf({},o.metadata),{},{name:"NEAR Wallet",description:null,iconUrl:r,deprecated:!0,available:!0})}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}var Hf=n(7145),Jf=function(){return L((function(){var e;return!(null===(e=window.near)||void 0===e||!e.isSender)})).catch((function(){return!1}))},Xf=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d,f,p,v,h,g;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.metadata,a=t.store,c=t.emitter,s=t.logger,u={wallet:window.near},l=function(){for(var e in u.wallet.callbacks)u.wallet.remove(e)},d=function(){var e=(0,o.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.wallet.isSignedIn()){e.next=2;break}return e.abrupt("return");case 2:return l(),e.next=5,u.wallet.signOut();case 5:if(!0!==(t=e.sent)){e.next=8;break}return e.abrupt("return");case 8:if("User reject"!==(n=new Error("string"===typeof t.error?t.error:t.error.type)).message){e.next=11;break}throw n;case 11:s.log("Failed to sign out"),s.error(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){u.wallet.on("accountChanged",function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.log("onAccountChange",t),c.emit("signedOut",null);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),u.wallet.on("rpcChanged",function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.log("onNetworkChange",t),n.network.networkId===t.networkId){e.next=6;break}return e.next=4,d();case 4:c.emit("signedOut",null),c.emit("networkChanged",{networkId:t.networkId});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},p=function(){var e=u.wallet.getAccountId();return e?[{accountId:e}]:[]},v=function(e){return e.every((function(e){return"FunctionCall"===e.type}))},h=function(e){if(!v(e))throw new Error("Only 'FunctionCall' actions types are supported by ".concat(r.name));return e.map((function(e){return e.params}))},g=function(e){return e.map((function(e){return{receiverId:e.receiverId,actions:h(e.actions)}}))},u.wallet&&u.wallet.isSignedIn()&&f(),e.abrupt("return",{signIn:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o,a,c,s;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.contractId,r=e.methodNames,!(o=p()).length){t.next=4;break}return t.abrupt("return",o);case 4:return t.next=6,u.wallet.requestSignIn({contractId:n,methodNames:r});case 6:if(a=t.sent,c=a.accessKey,s=a.error,c&&!s){t.next=13;break}return t.next=12,d();case 12:throw new Error(("string"===typeof s?s:s.type)||"Failed to sign in");case 13:return f(),t.abrupt("return",p());case 15:case"end":return t.stop()}}),t)})))()},signOut:d,getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p());case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o,c,l;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.signerId,r=e.receiverId,o=e.actions,s.log("signAndSendTransaction",{signerId:n,receiverId:r,actions:o}),c=a.getState(),l=c.contract,u.wallet.isSignedIn()&&l){t.next=5;break}throw new Error("Wallet not signed in");case 5:return t.abrupt("return",u.wallet.signAndSendTransaction({receiverId:r||l.contractId,actions:h(o)}).then((function(e){var t;if(e.error)throw new Error(e.error);if(null===(t=e.response)||void 0===t||!t.length)throw new Error("Invalid response");return e.response[0]})));case 6:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.transactions,s.log("signAndSendTransactions",{transactions:n}),u.wallet.isSignedIn()){t.next=4;break}throw new Error("Wallet not signed in");case 4:return t.abrupt("return",u.wallet.requestSignTransactions({transactions:g(n)}).then((function(e){var t;if(e.error)throw new Error(e.error);if(null===(t=e.response)||void 0===t||!t.length)throw new Error("Invalid response");return e.response})));case 5:case"end":return t.stop()}}),t)})))()}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconUrl,n=void 0===t?"./assets/sender-icon.png":t;return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Hf.isMobile)(),e.next=3,Jf();case 3:if(r=e.sent,!t){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,L((function(){var e;return!(null===(e=window.near)||void 0===e||!e.isSignedIn())}),{timeout:300}).catch((function(){return!1}));case 8:return e.abrupt("return",{id:"sender",type:"injected",metadata:{name:"Sender",description:null,iconUrl:n,downloadUrl:"https://chrome.google.com/webstore/detail/sender-wallet/epapihdplajcdnnkdeiahlgigofloibg",deprecated:!1,available:r},init:Xf});case 9:case"end":return e.stop()}}),e)})))}var Qf=function(){return L((function(){return!!window.nearWalletApi})).catch((function(){return!1}))},ep=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.store,a=t.provider,c=t.logger,s={wallet:window.nearWalletApi},u=function(){var e=s.wallet.signer.account;return e?[{accountId:e.accountId}]:[]},l=function(e){var t=r.getState().contract;if(!t)throw new Error("Wallet not signed in");var n=R(r.getState());if(!n)throw new Error("No active account");return e.map((function(e){return{signerId:e.signerId||n.accountId,receiverId:e.receiverId||t.contractId,actions:e.actions}}))},e.abrupt("return",{signIn:function(e){return(0,o.Z)(i().mark((function t(){var n,r;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.contractId,!(r=u()).length){t.next=4;break}return t.abrupt("return",r);case 4:return t.next=6,s.wallet.login({contractId:n});case 6:return t.abrupt("return",u());case 7:case"end":return t.stop()}}),t)})))()},signOut:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.wallet.logout();case 2:case"end":return e.stop()}}),e)})))()},getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u());case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var r,o,u,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.signerId,o=e.receiverId,u=e.actions,c.log("signAndSendTransaction",{signerId:r,receiverId:o,actions:u}),t.next=4,Df(l([{signerId:r,receiverId:o,actions:u}]),s.wallet.signer,n.network);case 4:return d=t.sent,t.abrupt("return",a.sendTransaction(d[0]));case 6:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.transactions,c.log("signAndSendTransactions",{transactions:r}),t.next=4,Df(l(r),s.wallet.signer,n.network);case 4:return o=t.sent,c.log("signAndSendTransactions:signedTransactions",o),t.abrupt("return",Promise.all(o.map((function(e){return a.sendTransaction(e)}))));case 7:case"end":return t.stop()}}),t)})))()}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tp=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconUrl,n=void 0===t?"./assets/math-wallet-icon.png":t;return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Hf.isMobile)(),e.next=3,Qf();case 3:if(r=e.sent,!t){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",{id:"math-wallet",type:"injected",metadata:{name:"Math Wallet",description:null,iconUrl:n,downloadUrl:"https://chrome.google.com/webstore/detail/math-wallet/afbcbjpbpfadlkmhmclhkeeodmamcflc",deprecated:!1,available:r},init:ep});case 7:case"end":return e.stop()}}),e)})))},np=n(8834).Buffer,rp=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.getState(),r=n.selectedWalletId,o=window.nightly.near,"nightly"!==r){e.next=5;break}return e.next=5,o.connect(void 0,!0).catch((function(){return null}));case 5:return e.abrupt("return",{wallet:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),op=function(){return L((function(){return!!window.nightly.near})).catch((function(){return!1}))},ap=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.store,a=t.logger,c=t.provider,e.next=3,rp(r);case 3:return s=e.sent,u=function(){var e=s.wallet.account,t=e.accountId,n=e.publicKey;return t?[{accountId:t,publicKey:n.toString()}]:[]},l=function(e){var t=u(),n=r.getState().contract;if(!t.length||!n)throw new Error("Wallet not signed in");return e.map((function(e){return{signerId:e.signerId||t[0].accountId,receiverId:e.receiverId||n.contractId,actions:e.actions}}))},d={createKey:function(){throw new Error("Not implemented")},getPublicKey:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u(),r=n.find((function(e){return e.accountId===t}))){e.next=4;break}throw new Error("Failed to find public key for account");case 4:return e.abrupt("return",f.utils.PublicKey.from(r.publicKey));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u(),r.find((function(e){return e.accountId===n}))){e.next=4;break}throw new Error("Failed to find account for signing");case 4:return e.prev=4,o=f.transactions.Transaction.decode(np.from(t)),e.next=8,s.wallet.signTransaction(o);case 8:return c=e.sent,e.abrupt("return",{signature:c.signature.data,publicKey:o.publicKey});case 12:throw e.prev=12,e.t0=e.catch(4),a.log("Failed to sign message"),a.error(e.t0),Error("Invalid message. Only transactions can be signed");case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},e.abrupt("return",{signIn:function(){return(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=u()).length){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,s.wallet.connect();case 5:return e.abrupt("return",u());case 6:case"end":return e.stop()}}),e)})))()},signOut:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.wallet.disconnect();case 2:case"end":return e.stop()}}),e)})))()},getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u().map((function(e){return{accountId:e.accountId}})));case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var o,s,f,p,v,h,g,m;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.signerId,s=e.receiverId,f=e.actions,a.log("signAndSendTransaction",{signerId:o,receiverId:s,actions:f}),p=r.getState(),v=p.contract,u().length&&v){t.next=6;break}throw new Error("Wallet not signed in");case 6:return t.next=8,Df(l([{signerId:o,receiverId:s,actions:f}]),d,n.network);case 8:return h=t.sent,g=(0,Uf.Z)(h,1),m=g[0],t.abrupt("return",c.sendTransaction(m));case 12:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.transactions,a.log("signAndSendTransactions",{transactions:r}),t.next=4,Df(l(r),d,n.network);case 4:return o=t.sent,t.abrupt("return",Promise.all(o.map((function(e){return c.sendTransaction(e)}))));case 6:case"end":return t.stop()}}),t)})))()}});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ip(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconUrl,n=void 0===t?"./assets/nightly.png":t;return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Hf.isMobile)(),e.next=3,op();case 3:if(r=e.sent,!t){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,L((function(){var e;return!(null===(e=window.nightly)||void 0===e||!e.near)}),{timeout:300}).catch((function(){return!1}));case 8:return e.abrupt("return",{id:"nightly",type:"injected",metadata:{name:"Nightly",description:null,iconUrl:n,downloadUrl:"https://www.nightly.app",deprecated:!1,available:r},init:ap});case 9:case"end":return e.stop()}}),e)})))}var cp=n(9978),sp=n(1959),up=n(8834).Buffer;function lp(e){var t=e.split("/");return up.concat(t.map((function(e){return e.endsWith("'")?2147483648|Math.abs(parseInt(e.slice(0,-1))):Math.abs(parseInt(e))})).map((function(e){return up.from([e>>24&255,e>>16&255,e>>8&255,255&e])})))}var dp="W".charCodeAt(0),fp=function(){var e;return!(null===(e=window.navigator)||void 0===e||!e.hid)},pp=function e(){var t=this;(0,u.Z)(this,e),(0,d.Z)(this,"transport",null),(0,d.Z)(this,"isConnected",(function(){return Boolean(t.transport)})),(0,d.Z)(this,"connect",(0,o.Z)(i().mark((function e(){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sp.Z.create();case 2:t.transport=e.sent,n=function e(){var n;null===(n=t.transport)||void 0===n||n.off("disconnect",e),t.transport=null},t.transport.on("disconnect",n);case 5:case"end":return e.stop()}}),e)})))),(0,d.Z)(this,"disconnect",(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transport){e.next=2;break}throw new Error("Device not connected");case 2:return e.next=4,t.transport.close();case 4:t.transport=null;case 5:case"end":return e.stop()}}),e)})))),(0,d.Z)(this,"setScrambleKey",(function(e){if(!t.transport)throw new Error("Device not connected");t.transport.setScrambleKey(e)})),(0,d.Z)(this,"on",(function(e,n){if(!t.transport)throw new Error("Device not connected");return t.transport.on(e,n),{remove:function(){var r;return null===(r=t.transport)||void 0===r?void 0:r.off(e,n)}}})),(0,d.Z)(this,"off",(function(e,n){if(!t.transport)throw new Error("Device not connected");t.transport.off(e,n)})),(0,d.Z)(this,"getVersion",(0,o.Z)(i().mark((function e(){var n,r,o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transport){e.next=2;break}throw new Error("Device not connected");case 2:return e.next=4,t.transport.send(128,6,0,0);case 4:return n=e.sent,r=Array.from(n),o=(0,Uf.Z)(r,3),a=o[0],c=o[1],s=o[2],e.abrupt("return","".concat(a,".").concat(c,".").concat(s));case 7:case"end":return e.stop()}}),e)})))),(0,d.Z)(this,"getPublicKey",function(){var e=(0,o.Z)(i().mark((function e(n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.derivationPath,t.transport){e.next=3;break}throw new Error("Device not connected");case 3:return e.next=5,t.transport.send(128,4,0,dp,lp(r));case 5:return o=e.sent,e.abrupt("return",f.utils.serialize.base_encode(o.subarray(0,-2)));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)(this,"sign",function(){var e=(0,o.Z)(i().mark((function e(n){var r,o,a,c,s,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data,o=n.derivationPath,t.transport){e.next=3;break}throw new Error("Device not connected");case 3:return e.next=5,t.getVersion();case 5:a=123,c=up.concat([lp(o),up.from(r)]),s=0;case 8:if(!(s<c.length)){e.next=18;break}return u=s+a>=c.length,e.next=12,t.transport.send(128,2,u?128:0,0,up.from(c.subarray(s,s+a)));case 12:if(l=e.sent,!u){e.next=15;break}return e.abrupt("return",up.from(l.subarray(0,-2)));case 15:s+=a,e.next=8;break;case 18:throw new Error("Invalid data or derivation path");case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},vp="accounts",hp=function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getItem(vp);case 2:return n=e.sent,e.abrupt("return",{client:new pp,subscriptions:[],accounts:n||[]});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gp=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d,p,v,h,g,m;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.store,a=t.provider,c=t.logger,s=t.storage,e.next=3,hp(s);case 3:return u=e.sent,l={createKey:function(){throw new Error("Not implemented")},getPublicKey:function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.accounts.find((function(e){return e.accountId===t}))){e.next=3;break}throw new Error("Failed to find public key for account");case 3:return e.abrupt("return",f.utils.PublicKey.from(n.publicKey));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.accounts.find((function(e){return e.accountId===n}))){e.next=3;break}throw new Error("Failed to find account for signing");case 3:return e.next=5,u.client.sign({data:t,derivationPath:r.derivationPath});case 5:return o=e.sent,e.abrupt("return",{signature:o,publicKey:f.utils.PublicKey.from(r.publicKey)});case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},d=function(){return u.accounts.map((function(e){return{accountId:e.accountId}}))},p=function(){u.subscriptions.forEach((function(e){return e.remove()})),u.subscriptions=[],u.accounts=[],s.removeItem(vp)},v=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.client.isConnected()){e.next=3;break}return e.next=3,u.client.disconnect().catch((function(e){c.log("Failed to disconnect device"),c.error(e)}));case 3:p();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.client.isConnected()){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u.client.connect();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(e){var t=e.accountId,n=e.publicKey;return c.log("validateAccessKey",{accountId:t,publicKey:n}),a.viewAccessKey({accountId:t,publicKey:n}).then((function(e){if(c.log("validateAccessKey:accessKey",{accessKey:e}),"FullAccess"!==e.permission)throw new Error("Public key requires 'FullAccess' permission");return e}),(function(e){if(e instanceof cp.TypedError&&"AccessKeyDoesNotExist"===e.type)return null;throw e}))},m=function(e){var t=r.getState().contract;if(!t)throw new Error("Wallet not signed in");var n=R(r.getState());if(!n)throw new Error("No active account");return e.map((function(e){return{signerId:e.signerId||n.accountId,receiverId:e.receiverId||t.contractId,actions:e.actions}}))},e.abrupt("return",{signIn:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o,a,c,l,f,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.accounts,!(r=d()).length){t.next=4;break}return t.abrupt("return",r);case 4:o=[],a=0;case 6:if(!(a<n.length)){t.next=17;break}return c=n[a],l=c.derivationPath,f=c.accountId,p=c.publicKey,t.next=10,g({accountId:f,publicKey:p});case 10:if(t.sent){t.next=13;break}throw new Error("Public key is not registered with the account '".concat(f,"'."));case 13:o.push({accountId:f,derivationPath:l,publicKey:p});case 14:a++,t.next=6;break;case 17:return t.next=19,s.setItem(vp,o);case 19:return u.accounts=o,t.abrupt("return",d());case 21:case"end":return t.stop()}}),t)})))()},signOut:v,getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d());case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var r,o,s,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.signerId,o=e.receiverId,s=e.actions,c.log("signAndSendTransaction",{signerId:r,receiverId:o,actions:s}),u.accounts.length){t.next=4;break}throw new Error("Wallet not signed in");case 4:return t.next=6,h();case 6:return t.next=8,Df(m([{signerId:r,receiverId:o,actions:s}]),l,n.network);case 8:return d=t.sent,t.abrupt("return",a.sendTransaction(d[0]));case 10:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var r,o;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.transactions,c.log("signAndSendTransactions",{transactions:r}),u.accounts.length){t.next=4;break}throw new Error("Wallet not signed in");case 4:return t.next=6,h();case 6:return t.next=8,Df(m(r),l,n.network);case 8:return o=t.sent,t.abrupt("return",Promise.all(o.map((function(e){return a.sendTransaction(e)}))));case 10:case"end":return t.stop()}}),t)})))()},getPublicKey:function(e){return(0,o.Z)(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h();case 2:return t.next=4,u.client.getPublicKey({derivationPath:e});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))()}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function mp(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.iconUrl,n=void 0===t?"./assets/ledger-icon.png":t;return(0,o.Z)(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=(0,Hf.isMobile)(),r=fp(),!t&&r){e.next=4;break}return e.abrupt("return",null);case 4:return e.abrupt("return",{id:"ledger",type:"hardware",metadata:{name:"Ledger",description:null,iconUrl:n,deprecated:!1,available:r},init:gp});case 5:case"end":return e.stop()}}),e)})))}var wp=n(9484),bp=n(8980),yp=n.n(bp),xp=function(){function e(){(0,u.Z)(this,e),(0,d.Z)(this,"client",void 0)}return(0,l.Z)(e,[{key:"init",value:function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wp.ZP.init(t);case 2:this.client=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"session",get:function(){return this.client.session}},{key:"on",value:function(e,t){var n=this;return this.client.on(e,t),{remove:function(){return n.client.off(e,t)}}}},{key:"once",value:function(e,t){this.client.once(e,t)}},{key:"connect",value:function(){var e=(0,o.Z)(i().mark((function e(t){var n=this;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){n.client.connect(t).then((function(t){var n=t.uri,o=t.approval;n&&yp().open(n,(function(){r(new Error("User cancelled pairing"))})),o().then(e).catch(r).finally((function(){return yp().close()}))})).catch(r)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.request(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.disconnect(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),kp=xp;function jp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jp(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Op=["near_signAndSendTransaction","near_signAndSendTransactions"],Sp=["accountsChanged"],Ep=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new kp,r=null,e.next=4,n.init({projectId:t.projectId,metadata:t.metadata,relayUrl:t.relayUrl});case 4:return n.session.length&&(o=n.session.keys.length-1,r=n.session.get(n.session.keys[o])),e.abrupt("return",{client:n,session:r,subscriptions:[]});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pp=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d,f,p,v;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,r=t.store,a=t.params,c=t.emitter,s=t.logger,e.next=3,Ep(a);case 3:return u=e.sent,l=function(){if(a.chainId)return a.chainId;var e=n.network.networkId;if(["mainnet","testnet"].includes(e))return"near:".concat(e);throw new Error("Invalid chain id")},d=function(){var e;return((null===(e=u.session)||void 0===e?void 0:e.namespaces.near.accounts)||[]).map((function(e){return{accountId:e.split(":")[2]}}))},f=function(){u.subscriptions.forEach((function(e){return e.remove()})),u.subscriptions=[],u.session=null},p=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u.session){e.next=3;break}return e.next=3,u.client.disconnect({topic:u.session.topic,reason:{code:5900,message:"User disconnected"}});case 3:f();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){u.subscriptions.push(u.client.on("session_update",(function(e){var t;s.log("Session Update",e),e.topic===(null===(t=u.session)||void 0===t?void 0:t.topic)&&(u.session=Ip(Ip({},u.client.session.get(e.topic)),{},{namespaces:e.params.namespaces}),c.emit("accountsChanged",{accounts:d()}))}))),u.subscriptions.push(u.client.on("session_delete",function(){var e=(0,o.Z)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.log("Session Deleted",t),t.topic===(null===(n=u.session)||void 0===n?void 0:n.topic)&&(f(),c.emit("signedOut",null));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},u.session&&v(),e.abrupt("return",{signIn:function(){return(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=d()).length){e.next=3;break}return e.abrupt("return",t);case 3:return e.prev=3,e.next=6,u.client.connect({requiredNamespaces:{near:{chains:[l()],methods:Op,events:Sp}}});case 6:return u.session=e.sent,v(),e.abrupt("return",d());case 11:return e.prev=11,e.t0=e.catch(3),e.next=15,p();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,11]])})))()},signOut:p,getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d());case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var n,o,a,c,d,f,p;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.signerId,o=e.receiverId,a=e.actions,s.log("signAndSendTransaction",{signerId:n,receiverId:o,actions:a}),c=r.getState(),d=c.contract,u.session&&d){t.next=5;break}throw new Error("Wallet not signed in");case 5:if(f=R(r.getState())){t.next=8;break}throw new Error("No active account");case 8:return p={signerId:n||f.accountId,receiverId:o||d.contractId,actions:a},t.abrupt("return",u.client.request({topic:u.session.topic,chainId:l(),request:{method:"near_signAndSendTransaction",params:{transaction:p}}}));case 10:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var n;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.transactions,s.log("signAndSendTransactions",{transactions:n}),u.session){t.next=4;break}throw new Error("Wallet not signed in");case 4:return t.abrupt("return",u.client.request({topic:u.session.topic,chainId:l(),request:{method:"near_signAndSendTransactions",params:{transactions:n}}}));case 5:case"end":return t.stop()}}),t)})))()}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ap(e){var t=e.projectId,n=e.metadata,r=e.chainId,a=e.relayUrl,c=void 0===a?"wss://relay.walletconnect.com":a,s=e.iconUrl,u=void 0===s?"./assets/wallet-connect-icon.png":s;return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:"wallet-connect",type:"bridge",metadata:{name:"WalletConnect",description:null,iconUrl:u,deprecated:!1,available:!0},init:function(e){return Pp(Ip(Ip({},e),{},{params:{projectId:t,metadata:n,relayUrl:c,chainId:r}}))}});case 1:case"end":return e.stop()}}),e)})))}var Zp=n(2276),Tp=n(8834).Buffer;function Np(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Np(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Np(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wp=function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,a,c,s,u,l,d,p,v,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.store,r=t.params,a=t.logger,c=t.options,s=t.provider,u=t.emitter,l={client:null,modal:new Zp.NightlyConnectModal,accounts:[]},d=function(){return l.accounts},p={createKey:function(){throw new Error("Not implemented")},getPublicKey:function(){var e=(0,o.Z)(i().mark((function e(t){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d(),r=n.find((function(e){return e.accountId===t}))){e.next=4;break}throw new Error("Failed to find public key for account");case 4:return e.abrupt("return",f.utils.PublicKey.from(r.publicKey));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signMessage:function(){var e=(0,o.Z)(i().mark((function e(t,n){var r,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d(),r.find((function(e){return e.accountId===n}))){e.next=4;break}throw new Error("Failed to find account for signing");case 4:return e.prev=4,o=f.transactions.Transaction.decode(Tp.from(t)),e.next=8,l.client.signTransaction(o);case 8:return c=e.sent,e.abrupt("return",{signature:c.signature.data,publicKey:o.publicKey});case 12:throw e.prev=12,e.t0=e.catch(4),a.log("Failed to sign message"),a.error(e.t0),Error("Invalid message. Only transactions can be signed");case 17:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t,n){return e.apply(this,arguments)}}()},v=function(){var e=(0,o.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===(t=l.client)||void 0===t||t.ws.close();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=R(n.getState()),r=n.getState().contract;if(!t||!r)throw new Error("Wallet not signed in");return e.map((function(e){return{signerId:e.signerId||t.accountId,receiverId:e.receiverId||r.contractId,actions:e.actions}}))},e.abrupt("return",{signIn:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=d();if(n.length)return e(n);try{Zp.AppNear.build(Cp(Cp({},r),{},{onUserConnect:function(t){l.accounts.push(t),l.modal.onClose=void 0,l.modal.closeModal(),e(d())}})).then((function(e){e.ws.onclose=function(){l.client=null,l.accounts=[],u.emit("signedOut",null)},l.client=e,l.modal.openModal(e.sessionId,Zp.NETWORK.NEAR),l.modal.onClose=function(){t(new Error("User cancelled pairing"))}}))}catch(o){v(),t(o)}})));case 1:case"end":return e.stop()}}),e)})))()},signOut:v,getAccounts:function(){return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d().map((function(e){return{accountId:e.accountId}})));case 1:case"end":return e.stop()}}),e)})))()},signAndSendTransaction:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o,u,f,v,g,m;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.signerId,o=e.receiverId,u=e.actions,a.log("signAndSendTransaction",{signerId:r,receiverId:o,actions:u}),f=d(),null!==(n=l.client)&&void 0!==n&&n.sessionId&&f.length){t.next=5;break}throw new Error("Wallet not signed in");case 5:return t.next=7,Df(h([{signerId:r,receiverId:o,actions:u}]),p,c.network);case 7:return v=t.sent,g=(0,Uf.Z)(v,1),m=g[0],t.abrupt("return",s.sendTransaction(m));case 11:case"end":return t.stop()}}),t)})))()},signAndSendTransactions:function(e){return(0,o.Z)(i().mark((function t(){var n,r,o,u;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.transactions,a.log("signAndSendTransactions",{transactions:r}),o=d(),null!==(n=l.client)&&void 0!==n&&n.sessionId&&o.length){t.next=5;break}throw new Error("Wallet not signed in");case 5:return t.next=7,Df(h(r),p,c.network);case 7:return u=t.sent,t.abrupt("return",Promise.all(u.map((function(e){return s.sendTransaction(e)}))));case 9:case"end":return t.stop()}}),t)})))()}});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function _p(e){var t=e.appMetadata,n=e.timeout,r=e.url,a=e.iconUrl,c=void 0===a?"./assets/nightly-connect.png":a;return(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{id:"nightly-connect",type:"bridge",metadata:{name:"Nightly Connect",description:null,iconUrl:c,deprecated:!1,available:!0},init:function(e){return Wp(Cp(Cp({},e),{},{params:{appMetadata:t,timeout:n,url:r}}))}});case 1:case"end":return e.stop()}}),e)})))}var Kp="guest-book.testnet",Up=r.createContext(null),Dp=function(e){var t,n=e.children,a=(0,r.useState)(null),u=a[0],l=a[1],d=(0,r.useState)(null),f=d[0],p=d[1],v=(0,r.useState)([]),h=v[0],g=v[1],m=(0,r.useCallback)((0,o.Z)(i().mark((function e(){var t,n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D({network:"testnet",debug:!0,modules:[zf(),qf(),Yf(),tp(),ip(),mp(),Ap({projectId:"c8cb6204543639c31aef44ea4837a554",metadata:{name:"NEAR Wallet Selector",description:"Example dApp used by NEAR Wallet Selector",url:"https://github.com/near/wallet-selector",icons:["https://avatars.githubusercontent.com/u/37784886"]}}),_p({url:"wss://ncproxy.nightly.app/app",appMetadata:{additionalInfo:"",application:"NEAR Wallet Selector",description:"Example dApp used by NEAR Wallet Selector",icon:"https://near.org/wp-content/uploads/2020/09/cropped-favicon-192x192.png"}})]});case 2:t=e.sent,n=Wf(t,{contractId:Kp}),r=t.store.getState(),g(r.accounts),window.selector=t,window.modal=n,l(t),p(n);case 10:case"end":return e.stop()}}),e)}))),[]);if((0,r.useEffect)((function(){m().catch((function(e){console.error(e),alert("Failed to initialise wallet selector")}))}),[m]),(0,r.useEffect)((function(){if(u){var e=u.store.observable.pipe((0,c.U)((function(e){return e.accounts})),(0,s.x)()).subscribe((function(e){console.log("Accounts Update",e),g(e)}));return function(){return e.unsubscribe()}}}),[u]),!u||!f)return null;var w=(null===(t=h.find((function(e){return e.active})))||void 0===t?void 0:t.accountId)||null;return(0,B.jsx)(Up.Provider,{value:{selector:u,modal:f,accounts:h,accountId:w},children:n})};var Fp=function(){return(0,B.jsxs)(r.Fragment,{children:[(0,B.jsx)("p",{children:"This app demonstrates a key element of NEAR\u2019s UX: once an app has permission to make calls on behalf of a user (that is, once a user signs in), the app can make calls to the blockchain for them without prompting extra confirmation. So you\u2019ll see that if you don\u2019t include a donation, your message gets posted right to the guest book."}),(0,B.jsx)("p",{children:"But if you do add a donation, then NEAR will double-check that you\u2019re ok with sending money to this app."}),(0,B.jsx)("p",{children:"Go ahead and sign in to try it out!"})]})},Mp=n(4244),Lp=n.n(Mp),Rp=function(e){var t=e.account,n=e.onSubmit;return(0,B.jsx)("form",{onSubmit:n,children:(0,B.jsxs)("fieldset",{id:"fieldset",children:[(0,B.jsxs)("p",{children:["Sign the guest book, ",t.account_id,"!"]}),(0,B.jsxs)("p",{className:"highlight",children:[(0,B.jsx)("label",{htmlFor:"message",children:"Message:"}),(0,B.jsx)("input",{autoComplete:"off",autoFocus:!0,id:"message",required:!0})]}),(0,B.jsxs)("p",{children:[(0,B.jsx)("label",{htmlFor:"donation",children:"Donation (optional):"}),(0,B.jsx)("input",{autoComplete:"off",defaultValue:"0",id:"donation",max:Lp()(t.amount).div(Math.pow(10,24)).toString(),min:"0",step:"0.01",type:"number"}),(0,B.jsx)("span",{title:"NEAR Tokens",children:"\u24c3"})]}),(0,B.jsxs)("p",{children:[(0,B.jsx)("label",{htmlFor:"multiple",children:"Multiple Transactions:"}),(0,B.jsx)("input",{id:"multiple",type:"checkbox"})]}),(0,B.jsx)("button",{type:"submit",children:"Sign"})]})})},Bp=function(e){var t=e.messages;return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)("h2",{children:"Messages"}),t.map((function(e,t){return(0,B.jsxs)("p",{className:e.premium?"is-premium":"",children:[(0,B.jsx)("strong",{children:e.sender}),":",(0,B.jsx)("br",{}),e.text]},t)}))]})},qp=n(8834).Buffer;function Gp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gp(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $p=f.utils.format.parseNearAmount("0.00000000003"),zp=function(){var e=function(){var e=(0,r.useContext)(Up);if(!e)throw new Error("useWalletSelector must be used within a WalletSelectorContextProvider");return e}(),t=e.selector,n=e.modal,a=e.accounts,c=e.accountId,s=(0,r.useState)(null),u=s[0],l=s[1],d=(0,r.useState)([]),p=d[0],v=d[1],h=(0,r.useState)(!1),g=h[0],m=h[1],w=(0,r.useCallback)((0,o.Z)(i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return",null);case 2:return n=t.options.network,r=new f.providers.JsonRpcProvider({url:n.nodeUrl}),e.abrupt("return",r.query({request_type:"view_account",finality:"final",account_id:c}).then((function(e){return Vp(Vp({},e),{},{account_id:c})})));case 5:case"end":return e.stop()}}),e)}))),[c,t.options]),b=(0,r.useCallback)((function(){var e=t.options.network;return new f.providers.JsonRpcProvider({url:e.nodeUrl}).query({request_type:"call_function",account_id:Kp,method_name:"getMessages",args_base64:"",finality:"optimistic"}).then((function(e){return JSON.parse(qp.from(e.result).toString())}))}),[t]);(0,r.useEffect)((function(){b().then(v)}),[]),(0,r.useEffect)((function(){if(!c)return l(null);m(!0),w().then((function(e){l(e),m(!1)}))}),[c,w]);var y=function(){var e=(0,o.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.wallet();case 2:e.sent.signOut().catch((function(e){console.log("Failed to sign out"),console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=(0,r.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(n,r,o){var a,s,u,l,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.store.getState(),s=a.contract,e.next=3,t.wallet();case 3:if(u=e.sent,o){e.next=6;break}return e.abrupt("return",u.signAndSendTransaction({signerId:c,actions:[{type:"FunctionCall",params:{methodName:"addMessage",args:{text:n},gas:$p,deposit:f.utils.format.parseNearAmount(r)}}]}).catch((function(e){throw alert("Failed to add message"),console.log("Failed to add message"),e})));case 6:for(l=[],d=0;d<2;d+=1)l.push({signerId:c,receiverId:s.contractId,actions:[{type:"FunctionCall",params:{methodName:"addMessage",args:{text:"".concat(n," (").concat(d+1,"/2)")},gas:$p,deposit:f.utils.format.parseNearAmount(r)}}]});return e.abrupt("return",u.signAndSendTransactions({transactions:l}).catch((function(e){throw alert("Failed to add messages"),console.log("Failed to add messages"),e})));case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t,c]),k=(0,r.useCallback)(function(){var e=(0,o.Z)(i().mark((function e(t){var n,r,o,a,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,r=n.fieldset,o=n.message,a=n.donation,c=n.multiple,r.disabled=!0,e.abrupt("return",x(o.value,a.value||"0",c.checked).then((function(){return b().then((function(e){v(e),o.value="",a.value="0",r.disabled=!1,o.focus()})).catch((function(e){throw alert("Failed to refresh messages"),console.log("Failed to refresh messages"),e}))})).catch((function(e){console.error(e),r.disabled=!1})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[x,b]);return g?null:u?(0,B.jsxs)(r.Fragment,{children:[(0,B.jsxs)("div",{children:[(0,B.jsx)("button",{onClick:y,children:"Log out"}),(0,B.jsx)("button",{onClick:function(){n.show()},children:"Switch Wallet"}),a.length>1&&(0,B.jsx)("button",{onClick:function(){var e=a.findIndex((function(e){return e.accountId===c})),n=e<a.length-1?e+1:0,r=a[n].accountId;t.setActiveAccount(r),alert("Switched account to "+r)},children:"Switch Account"})]}),(0,B.jsx)(Rp,{account:u,onSubmit:function(e){return k(e)}}),(0,B.jsx)(Bp,{messages:p})]}):(0,B.jsxs)(r.Fragment,{children:[(0,B.jsx)("div",{children:(0,B.jsx)("button",{onClick:function(){n.show()},children:"Log in"})}),(0,B.jsx)(Fp,{})]})},Hp=function(){return(0,B.jsxs)(r.Fragment,{children:[(0,B.jsx)("h1",{children:"NEAR Guest Book"}),(0,B.jsx)(Dp,{children:(0,B.jsx)(zp,{})})]})}},2958:function(){},7389:function(){},5975:function(){},8738:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5556)}])},1993:function(){},5477:function(){},3196:function(){},8087:function(){},488:function(){},5338:function(){}},function(e){e.O(0,[189,999,963,774,888,179],(function(){return t=8738,e(e.s=t);var t}));var t=e.O();_N_E=t}]);